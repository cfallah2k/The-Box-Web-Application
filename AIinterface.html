<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RabbaAI | Advanced AI Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Base Styles */
        :root {
            --primary-color: #6c5ce7;
            --primary-hover: #5649c0;
            --secondary-color: #00b894;
            --secondary-hover: #00a383;
            --accent-color: #fdcb6e;
            --danger-color: #d63031;
            --success-color: #00b894;
            --warning-color: #fdcb6e;
            --info-color: #0984e3;
            --bg-color: #ffffff;
            --text-color: #2d3436;
            --text-light: #636e72;
            --sidebar-bg: #f5f6fa;
            --border-color: #dfe6e9;
            --message-bg: #f5f6fa;
            --input-bg: #ffffff;
            --card-bg: #ffffff;
            --quick-action-bg: #dfe6e9;
            --quick-action-hover: #b2bec3;
            --code-bg: #f3f4f6;
            --typing-bg: #f3f4f6;
            --typing-dot: #4b5563;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --radius-sm: 4px;
            --radius: 8px;
            --radius-lg: 12px;
            --radius-xl: 16px;
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --header-height: 60px;
            --sidebar-width: 280px;
        }

        .dark-mode {
            --primary-color: #a29bfe;
            --primary-hover: #6c5ce7;
            --secondary-color: #55efc4;
            --secondary-hover: #00b894;
            --accent-color: #ffeaa7;
            --danger-color: #ff7675;
            --success-color: #55efc4;
            --warning-color: #ffeaa7;
            --info-color: #74b9ff;
            --bg-color: #1e272e;
            --text-color: #f5f6fa;
            --text-light: #b2bec3;
            --sidebar-bg: #2d3436;
            --border-color: #3c4249;
            --message-bg: #2d3436;
            --input-bg: #2d3436;
            --card-bg: #2d3436;
            --quick-action-bg: #3c4249;
            --quick-action-hover: #4b5563;
            --code-bg: #3c4249;
            --typing-bg: #3c4249;
            --typing-dot: #d1d5db;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 25px -5px rgba(0, 0, 0, 0.2), 0 10px 10px -5px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            overflow-x: hidden;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--sidebar-bg);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-hover);
        }

        /* Layout */
        .ai-container {
            display: flex;
            height: 100vh;
            max-width: 100%;
            position: relative;
        }

        /* Sidebar */
        .ai-sidebar {
            width: var(--sidebar-width);
            background-color: var(--sidebar-bg);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            z-index: 20;
        }

        .sidebar-header {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: var(--header-height);
        }

        .sidebar-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .new-chat-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .new-chat-btn:hover {
            background-color: var(--primary-hover);
            transform: scale(1.05);
            box-shadow: var(--shadow);
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding: 0.5rem;
        }

        .chat-item {
            padding: 0.75rem 1rem;
            border-radius: var(--radius);
            cursor: pointer;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: var(--transition);
            position: relative;
        }

        .chat-item:hover {
            background-color: var(--quick-action-bg);
        }

        .chat-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .chat-item-icon {
            flex-shrink: 0;
        }

        .chat-item-content {
            flex: 1;
            min-width: 0;
        }

        .chat-item-title {
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-item-preview {
            font-size: 0.8rem;
            color: var(--text-light);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .chat-item-time {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-left: auto;
            flex-shrink: 0;
        }

        .sidebar-footer {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 500;
            text-transform: uppercase;
            background-size: cover;
            background-position: center;
        }

        .user-name {
            font-weight: 500;
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .settings-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            color: var(--text-color);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .settings-btn:hover {
            background-color: var(--quick-action-bg);
        }

        /* Main content */
        .ai-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header */
        .ai-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1.5rem;
            border-bottom: 1px solid var(--border-color);
            background-color: var(--bg-color);
            z-index: 10;
            box-shadow: var(--shadow-sm);
            height: var(--header-height);
            position: relative;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .sidebar-toggle {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            color: var(--text-color);
            border: none;
            cursor: pointer;
            display: none;
            transition: var(--transition);
        }
        .sidebar-toggle:hover {
            background-color: var(--quick-action-bg);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-img {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            object-fit: cover;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 700;
            background-size: cover;
            background-position: center;
        }

        .logo-text {
            font-size: 1.25rem;
            font-weight: 700;
            color: inherit;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .header-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--quick-action-bg);
            color: var(--text-color);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .header-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .header-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .header-btn.badge::after {
            content: '';
            position: absolute;
            top: 2px;
            right: 2px;
            width: 8px;
            height: 8px;
            background-color: var(--accent-color);
            border-radius: 50%;
            border: 2px solid var(--bg-color);
        }

        /* Main chat area */
        .ai-main {
            flex: 1;
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            background-color: var(--message-bg);
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(var(--primary-color-rgb), 0.02) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(var(--secondary-color-rgb), 0.02) 0%, transparent 20%);
            background-size: 200% 200%;
            animation: gradientBackground 20s ease infinite;
        }

        @keyframes gradientBackground {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }

        /* Message styles */
        .message {
            max-width: 800px;
            margin: 0 auto;
            width: 100%;
            display: flex;
            gap: 1rem;
            padding: 1rem 0;
            position: relative;
        }

        .message-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            background-color: var(--quick-action-bg);
            color: var(--text-color);
            font-weight: 500;
            transition: var(--transition);
        }

        .message-user .message-avatar {
            background-color: var(--primary-color);
            color: white;
        }

        .message-teacher .message-avatar {
            background-color: var(--secondary-color);
            color: white;
        }

        .message-content {
            flex: 1;
            padding-top: 0.25rem;
        }

        .message-text {
            line-height: 1.7;
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .message-text p {
            margin-bottom: 1rem;
        }

        .message-text p:last-child {
            margin-bottom: 0;
        }

        .message-text a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .message-text a:hover {
            text-decoration: underline;
        }

        .message-text code {
            background-color: var(--code-bg);
            padding: 0.2rem 0.4rem;
            border-radius: var(--radius-sm);
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
        }

        .message-text pre {
            background-color: var(--code-bg);
            padding: 1rem;
            border-radius: var(--radius);
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            position: relative;
        }

        .message-text pre::before {
            content: 'Code';
            position: absolute;
            top: 0;
            right: 0;
            background-color: var(--primary-color);
            color: white;
            padding: 0.25rem 0.5rem;
            font-size: 0.7rem;
            border-radius: 0 0 0 var(--radius-sm);
            font-family: 'Poppins', sans-serif;
        }

        .message-text table {
            border-collapse: collapse;
            width: 100%;
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .message-text th, .message-text td {
            border: 1px solid var(--border-color);
            padding: 0.5rem;
            text-align: left;
        }

        .message-text th {
            background-color: var(--quick-action-bg);
            font-weight: 600;
        }

        .message-text ul, .message-text ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }

        .message-text li {
            margin-bottom: 0.5rem;
        }

        .message-text blockquote {
            border-left: 3px solid var(--primary-color);
            padding-left: 1rem;
            margin: 1rem 0;
            color: var(--text-light);
            font-style: italic;
        }

        .message-time {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 0.25rem;
        }

        /* Message actions */
        .message-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .message-action {
            background-color: transparent;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: 0.25rem;
            transition: var(--transition);
        }

        .message-action:hover {
            background-color: var(--quick-action-bg);
        }

        .message-action.like:hover {
            color: var(--success-color);
        }

        .message-action.dislike:hover {
            color: var(--danger-color);
        }

        .message-action.copy:hover {
            color: var(--primary-color);
        }

        .message-action.read:hover {
            color: var(--info-color);
        }

        .message-action.report:hover {
            color: var(--danger-color);
        }

        /* Input area */
        .ai-input-container {
            padding: 1rem;
            border-top: 1px solid var(--border-color);
            background-color: var(--bg-color);
            position: relative;
            box-shadow: var(--shadow-sm);
        }

        .ai-input-wrapper {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .ai-textarea {
            width: 100%;
            min-height: 60px;
            max-height: 200px;
            padding: 1rem 4.5rem 1rem 1rem;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
            resize: none;
            font-size: 1rem;
            line-height: 1.5;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .ai-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
        }

        .input-actions {
            position: absolute;
            right: 0.75rem;
            bottom: 0.75rem;
            display: flex;
            gap: 0.5rem;
        }

        .input-action-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background-color: var(--quick-action-bg);
            color: var(--text-color);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .input-action-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .ai-send-btn {
            background-color: var(--primary-color);
            color: white;
        }

        .ai-send-btn:disabled {
            background-color: var(--quick-action-bg);
            color: var(--text-color);
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 0.5rem 1rem;
            background-color: var(--typing-bg);
            border-radius: var(--radius-xl);
            width: fit-content;
            margin-bottom: 1rem;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--typing-dot);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* High School Curriculum Styles */
        .subject-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .subject-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-color);
        }

        .subject-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .subject-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .subject-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .subject-description {
            margin-bottom: 1rem;
            color: var(--text-light);
            font-size: 0.9rem;
        }

        .topic-list {
            margin-top: 1rem;
        }

        .topic-item {
            padding: 0.75rem;
            border-radius: var(--radius-sm);
            margin-bottom: 0.5rem;
            background-color: var(--quick-action-bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }

        .topic-item:hover {
            background-color: var(--quick-action-hover);
        }

        .topic-name {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .topic-actions {
            display: flex;
            gap: 0.5rem;
        }

        .topic-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: transparent;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .topic-btn:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .topic-btn.primary {
            color: var(--primary-color);
        }

        .topic-btn.secondary {
            color: var(--secondary-color);
        }

        .topic-btn.accent {
            color: var(--accent-color);
        }

        /* Quiz styles */
        .quiz-container {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .quiz-timer {
            background-color: var(--quick-action-bg);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .quiz-question {
            font-weight: 600;
            margin-bottom: 1rem;
            font-size: 1rem;
        }

        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .quiz-option {
            padding: 0.75rem 1rem;
            border-radius: var(--radius-sm);
            background-color: var(--quick-action-bg);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            padding-left: 2.5rem;
        }

        .quiz-option:hover {
            background-color: var(--quick-action-hover);
        }

        .quiz-option.selected {
            background-color: var(--primary-color);
            color: white;
        }

        .quiz-option.correct {
            background-color: var(--success-color);
            color: white;
        }

        .quiz-option.incorrect {
            background-color: var(--danger-color);
            color: white;
        }

        .quiz-option-radio {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
        }

        .quiz-option.selected .quiz-option-radio {
            border-color: white;
            background-color: white;
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: var(--radius-sm);
            background-color: var(--code-bg);
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }

        .quiz-progress {
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--text-light);
            text-align: center;
        }

        /* Assignment styles */
        .assignment-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .assignment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .assignment-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .assignment-due {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        .assignment-description {
            margin-bottom: 1.5rem;
            color: var(--text-color);
        }

        .assignment-attachments {
            margin-bottom: 1.5rem;
        }

        .attachment-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            background-color: var(--quick-action-bg);
            margin-bottom: 0.5rem;
        }

        .attachment-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
        }

        .attachment-name {
            flex: 1;
            font-size: 0.9rem;
        }

        .attachment-download {
            color: var(--primary-color);
            cursor: pointer;
        }

        .assignment-submission {
            margin-top: 1.5rem;
        }

        .assignment-textarea {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            margin-bottom: 1rem;
            color: var(--text-color);
        }

        .assignment-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }

        /* Live Class Styles */
        .live-class-container {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .live-class-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .live-class-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .live-class-status {
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-sm);
            background-color: var(--danger-color);
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .live-class-status.active {
            background-color: var(--success-color);
        }

        .live-class-info {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .live-class-info-item {
            display: flex;
            flex-direction: column;
        }

        .live-class-info-label {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-bottom: 0.25rem;
        }

        .live-class-info-value {
            font-weight: 500;
        }

        .live-class-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1.5rem;
        }

        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 */
            height: 0;
            overflow: hidden;
            margin: 1rem 0;
            border-radius: var(--radius);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
            border-radius: var(--radius);
        }

        .class-chat-container {
            height: 400px;
            overflow-y: auto;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1rem;
            margin: 1rem 0;
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
        }

        .class-chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .class-chat-message {
            margin-bottom: 1rem;
            padding: 0.75rem;
            border-radius: var(--radius);
            background-color: var(--quick-action-bg);
            max-width: 80%;
        }

        .class-chat-message.user {
            background-color: var(--primary-color);
            color: white;
            margin-left: auto;
        }

        .class-chat-message.teacher {
            background-color: var(--secondary-color);
            color: white;
            margin-right: auto;
        }

        .class-chat-input-container {
            display: flex;
            gap: 0.5rem;
        }

        .class-chat-input {
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            background-color: var(--input-bg);
            color: var(--text-color);
        }

        .class-chat-send-btn {
            padding: 0 1.5rem;
            border-radius: var(--radius);
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
        }

        /* Attendance tracking */
        .attendance-list {
            margin-top: 1.5rem;
        }

        .attendance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }

        .attendance-name {
            font-weight: 500;
        }

        .attendance-status {
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .attendance-status.present {
            background-color: var(--success-color);
            color: white;
        }

        .attendance-status.absent {
            background-color: var(--danger-color);
            color: white;
        }

        .attendance-status.late {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        /* Student Dashboard Styles */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .dashboard-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .dashboard-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .dashboard-card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .dashboard-card-value {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .progress-chart {
            height: 150px;
            margin: 1rem 0;
            position: relative;
        }

        .progress-bar-vertical {
            height: 100%;
            width: 20px;
            background-color: var(--quick-action-bg);
            border-radius: var(--radius-sm);
            position: relative;
            overflow: hidden;
        }

        .progress-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--primary-color);
            transition: height 0.5s ease;
        }

        .course-progress {
            margin-top: 1rem;
        }

        .course-progress-item {
            margin-bottom: 0.75rem;
        }

        .course-progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.25rem;
            font-size: 0.9rem;
        }

        .course-progress-bar {
            height: 6px;
            background-color: var(--quick-action-bg);
            border-radius: 3px;
            overflow: hidden;
        }

        .course-progress-fill {
            height: 100%;
            background-color: var(--primary-color);
        }

        /* AI Mode Selector */
        .ai-mode-selector {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .ai-mode-btn {
            padding: 0.5rem 1rem;
            border-radius: var(--radius);
            background-color: var(--quick-action-bg);
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            font-size: 0.9rem;
        }

        .ai-mode-btn:hover {
            background-color: var(--quick-action-hover);
        }

        .ai-mode-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* Group Session Styles */
        .group-session-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .group-session-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .group-session-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .group-session-status {
            padding: 0.25rem 0.75rem;
            border-radius: var(--radius-sm);
            background-color: var(--quick-action-bg);
            font-size: 0.75rem;
            font-weight: 600;
        }

        .group-session-status.active {
            background-color: var(--success-color);
            color: white;
        }

        .group-session-members {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .group-member {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-sm);
            background-color: var(--quick-action-bg);
            font-size: 0.8rem;
        }

        .group-member-avatar {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.6rem;
        }

        .group-session-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        /* School Connection Styles */
        .school-connection-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
            box-shadow: var(--shadow-sm);
        }

        .school-connection-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .school-connection-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
        }

        .school-connection-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--quick-action-bg);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .school-connection-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .school-connection-info {
            margin: 1rem 0;
        }

        .school-connection-info-item {
            display: flex;
            margin-bottom: 0.5rem;
        }

        .school-connection-info-label {
            font-weight: 500;
            width: 120px;
            color: var(--text-light);
        }

        .school-connection-info-value {
            flex: 1;
        }

        .school-connection-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        /* Quick action buttons */
        .quick-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .quick-action-btn {
            padding: 0.5rem 0.75rem;
            background-color: var(--quick-action-bg);
            border: none;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-action-btn:hover {
            background-color: var(--quick-action-hover);
        }

        .quick-action-btn.primary {
            background-color: var(--primary-color);
            color: white;
        }

        .quick-action-btn.primary:hover {
            background-color: var(--primary-hover);
        }

        .quick-action-btn.secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .quick-action-btn.secondary:hover {
            background-color: var(--secondary-hover);
        }

        .quick-action-btn.accent {
            background-color: var(--accent-color);
            color: var(--text-color);
        }

        .quick-action-btn.accent:hover {
            background-color: #f7b731;
        }

        .quick-action-btn.danger {
            background-color: var(--danger-color);
            color: white;
        }

        .quick-action-btn.danger:hover {
            background-color: #c0392b;
        }

        /* Model selector dropdown */
        .model-selector {
            position: relative;
            display: inline-block;
        }

        .model-selector-btn {
            padding: 0.5rem 1rem;
            background-color: var(--quick-action-bg);
            border: none;
            border-radius: 20px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .model-selector-btn:hover {
            background-color: var(--quick-action-hover);
        }

        .model-selector-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 0.5rem;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            min-width: 240px;
            z-index: 30;
            display: none;
            overflow: hidden;
        }

        .model-selector:hover .model-selector-dropdown {
            display: block;
        }

        .model-option {
            padding: 0.75rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: var(--transition);
        }

        .model-option:hover {
            background-color: var(--quick-action-bg);
        }

        .model-option.active {
            background-color: var(--primary-color);
            color: white;
        }

        .model-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .model-info {
            flex: 1;
        }

        .model-name {
            font-weight: 500;
        }

        .model-desc {
            font-size: 0.75rem;
            opacity: 0.7;
        }

        /* Settings modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(5px);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background-color: var(--bg-color);
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background-color: var(--bg-color);
            z-index: 1;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-color);
            transition: var(--transition);
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .modal-close:hover {
            background-color: var(--quick-action-bg);
        }

        .modal-body {
            padding: 1.5rem;
        }

        .settings-section {
            margin-bottom: 1.5rem;
        }

        .settings-section-title {
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
        }

        .settings-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .settings-option:last-child {
            border-bottom: none;
        }

        .settings-option-label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            flex: 1;
        }

        .settings-option-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
        }

        .settings-option-value {
            margin-left: 1rem;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--quick-action-bg);
            transition: .4s;
            border-radius: 24px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        /* Language selector */
        .language-selector {
            position: relative;
        }

        .language-selector-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: var(--transition);
        }

        .language-selector-btn:hover {
            background-color: var(--quick-action-bg);
        }

        .language-flag {
            width: 20px;
            height: 15px;
            border-radius: 2px;
            object-fit: cover;
        }

        .language-dropdown {
            position: absolute;
            right: 0;
            top: 100%;
            margin-top: 0.5rem;
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            box-shadow: var(--shadow-md);
            min-width: 180px;
            z-index: 30;
            display: none;
            max-height: 300px;
            overflow-y: auto;
        }

        .language-selector:hover .language-dropdown {
            display: block;
        }

        .language-option {
            padding: 0.5rem 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: var(--transition);
        }

        .language-option:hover {
            background-color: var(--quick-action-bg);
        }

        /* File upload preview */
        .file-preview {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background-color: var(--quick-action-bg);
            border-radius: var(--radius);
            margin-top: 0.5rem;
            max-width: 300px;
            transition: var(--transition);
        }

        .file-icon {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            background-color: rgba(108, 92, 231, 0.1);
            border-radius: var(--radius-sm);
            flex-shrink: 0;
        }

        .file-info {
            flex: 1;
            min-width: 0;
        }

        .file-name {
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .file-size {
            font-size: 0.75rem;
            opacity: 0.8;
            color: var(--text-light);
        }

        .file-remove {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            flex-shrink: 0;
            transition: var(--transition);
        }

        .file-remove:hover {
            background-color: rgba(0, 0, 0, 0.1);
            color: var(--danger-color);
        }

        /* Toast notifications */
        .toast-notification {
            position: fixed;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            animation: slideIn 0.3s ease-out;
            border: 1px solid var(--border-color);
        }

        @keyframes slideIn {
            from { transform: translateX(-50%) translateY(100%); opacity: 0; }
            to { transform: translateX(-50%) translateY(0); opacity: 1; }
        }

        .toast-notification.success {
            background-color: var(--success-color);
            color: white;
        }

        .toast-notification.error {
            background-color: var(--danger-color);
            color: white;
        }

        .toast-notification.warning {
            background-color: var(--warning-color);
            color: var(--text-color);
        }

        .toast-notification.info {
            background-color: var(--info-color);
            color: white;
        }

        /* Progress bar */
        .progress-bar {
            height: 4px;
            background-color: var(--quick-action-bg);
            border-radius: 2px;
            overflow: hidden;
            margin: 0.5rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1rem;
        }

        .tab {
            padding: 0.75rem 1rem;
            cursor: pointer;
            position: relative;
            font-weight: 500;
            color: var(--text-light);
            transition: var(--transition);
        }

        .tab:hover {
            color: var(--text-color);
        }

        .tab.active {
            color: var(--primary-color);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--primary-color);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: var(--radius-sm);
            background-color: var(--quick-action-bg);
            color: var(--text-color);
        }

        .badge.primary {
            background-color: var(--primary-color);
            color: white;
        }

        .badge.secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .badge.accent {
            background-color: var(--accent-color);
            color: var(--text-color);
        }

        .badge.danger {
            background-color: var(--danger-color);
            color: white;
        }

        /* Tooltips */
        .tooltip {
            position: relative;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 0.5rem 0.75rem;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
            z-index: 10;
        }

        .tooltip:hover::after {
            opacity: 1;
            visibility: visible;
            bottom: calc(100% + 5px);
        }

        /* Learning path */
        .learning-path {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin: 1rem 0;
        }

        .path-item {
            display: flex;
            gap: 1rem;
            padding: 1rem;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .path-item:hover {
            border-color: var(--primary-color);
            box-shadow: var(--shadow-sm);
        }

        .path-item-number {
            width: 24px;
            height: 24px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            font-weight: 600;
            font-size: 0.8rem;
        }

        .path-item-content {
            flex: 1;
        }

        .path-item-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .path-item-desc {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Stats cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .stat-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .stat-card-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .stat-card-label {
            font-size: 0.875rem;
            color: var(--text-light);
        }

        /* Calendar */
        .calendar {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .calendar-title {
            font-weight: 600;
        }

        .calendar-nav {
            display: flex;
            gap: 0.5rem;
        }

        .calendar-nav-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--quick-action-bg);
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-nav-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
        }

        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            font-size: 0.875rem;
            padding: 0.25rem;
            color: var(--text-light);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .calendar-day:hover {
            background-color: var(--quick-action-bg);
        }

        .calendar-day.today {
            background-color: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        .calendar-day.selected {
            background-color: var(--secondary-color);
            color: white;
            font-weight: 600;
        }

        .calendar-day.other-month {
            opacity: 0.3;
        }

        /* Knowledge graph */
        .knowledge-graph {
            display: flex;
            justify-content: center;
            margin: 1rem 0;
            position: relative;
            height: 300px;
        }

        .graph-node {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--shadow);
            text-align: center;
            padding: 0.5rem;
        }

        .graph-node:hover {
            transform: scale(1.1);
        }

        .graph-node.secondary {
            background-color: var(--secondary-color);
        }

        .graph-node.accent {
            background-color: var(--accent-color);
        }

        .graph-line {
            position: absolute;
            height: 2px;
            background-color: var(--border-color);
            transform-origin: left center;
        }

        /* Responsive adjustments */
        @media (max-width: 1024px) {
            .ai-sidebar {
                position: fixed;
                left: 0;
                top: 0;
                bottom: 0;
                transform: translateX(-100%);
                box-shadow: var(--shadow-lg);
            }

            .ai-sidebar.active {
                transform: translateX(0);
            }

            .sidebar-toggle {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .message {
                gap: 0.75rem;
            }
            
            .message-avatar {
                width: 32px;
                height: 32px;
                font-size: 0.875rem;
            }
            
            .subject-card {
                flex-direction: column;
            }
            
            .subject-image {
                width: 100%;
                height: 120px;
            }

            .header-actions {
                gap: 0.5rem;
            }

            .ai-main {
                padding: 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .live-class-info {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .ai-header {
                padding: 0.75rem 1rem;
            }
            
            .ai-textarea {
                padding-right: 3.5rem;
            }
            
            .input-actions {
                right: 0.5rem;
                bottom: 0.5rem;
            }

            .input-action-btn {
                width: 30px;
                height: 30px;
            }

            .quick-actions {
                gap: 0.25rem;
            }

            .quick-action-btn {
                padding: 0.4rem 0.6rem;
                font-size: 0.75rem;
            }

            .header-actions {
                gap: 0.25rem;
            }

            .model-selector-btn span {
                display: none;
            }

            .language-selector-btn span {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="ai-container">
        <!-- Sidebar -->
        <aside class="ai-sidebar" id="aiSidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">
                    <i class="fas fa-comments" style="margin-right: 0.5rem; color: var(--primary-color);"></i>
                    Chat History
                </div>
                <button class="new-chat-btn tooltip" id="newChatBtn" title="New chat" data-tooltip="Start a new chat">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            <div class="chat-history" id="chatHistory">
                <!-- Chat history items will be added here -->
            </div>
            <div class="sidebar-footer">
                <div class="user-profile">
                    <div class="user-avatar" id="userAvatar">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=6c5ce7&color=fff&rounded=true&size=36" alt="User Avatar" style="width:36px;height:36px;border-radius:50%;">
                    </div>
                    <div class="user-name" id="sidebarUserName">John Doe</div>
                    <button class="settings-btn tooltip" id="sidebarSettingsBtn" data-tooltip="Settings">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main content -->
        <div class="ai-content">
            <header class="ai-header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Open sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <a href="#" class="logo" style="gap:0.75rem; align-items:center;">
                        <span style="display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#6c5ce7 60%,#00b894 100%);box-shadow:0 2px 8px rgba(108,92,231,0.15);">
                            <img src="images/box-logo-1.jpg" alt="RabbaAI Logo" class="logo-img" id="logoImage" style="background:none;width:28px;height:28px;">
                        </span>
                        <span class="logo-text" style="font-weight:900;letter-spacing:1.5px;font-size:1.35rem;line-height:1;">
                            Rabba<span style="color:var(--secondary-color);font-weight:900;">AI</span>
                        </span>
                    </a>
                </div>
                <div class="header-actions">
                    <div class="model-selector">
                        <button class="model-selector-btn" aria-haspopup="listbox" aria-expanded="false">
                            <i class="fas fa-brain"></i>
                            <span id="currentModel">Tutor Mode</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="model-selector-dropdown" role="listbox">
                            <div class="model-option active" data-model="tutor" tabindex="0">
                                <div class="model-icon"><i class="fas fa-chalkboard-teacher"></i></div>
                                <div class="model-info">
                                    <div class="model-name">Tutor Mode</div>
                                    <div class="model-desc">Detailed explanations and teaching</div>
                                </div>
                                <span class="badge primary">AI 4.0</span>
                            </div>
                            <div class="model-option" data-model="quiz" tabindex="0">
                                <div class="model-icon"><i class="fas fa-question-circle"></i></div>
                                <div class="model-info">
                                    <div class="model-name">Quiz Mode</div>
                                    <div class="model-desc">Practice questions & instant feedback</div>
                                </div>
                                <span class="badge accent">Beta</span>
                            </div>
                            <div class="model-option" data-model="assignment" tabindex="0">
                                <div class="model-icon"><i class="fas fa-tasks"></i></div>
                                <div class="model-info">
                                    <div class="model-name">Assignment Mode</div>
                                    <div class="model-desc">Custom assignments & grading</div>
                                </div>
                            </div>
                            <div class="model-option" data-model="study" tabindex="0">
                                <div class="model-icon"><i class="fas fa-book"></i></div>
                                <div class="model-info">
                                    <div class="model-name">Study Buddy</div>
                                    <div class="model-desc">Interactive learning sessions</div>
                                </div>
                            </div>
                            <div class="model-option" data-model="research" tabindex="0">
                                <div class="model-icon"><i class="fas fa-search"></i></div>
                                <div class="model-info">
                                    <div class="model-name">Research Assistant</div>
                                    <div class="model-desc">Summarize & find resources</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button class="header-btn tooltip" id="curriculumBtn" title="Curriculum" data-tooltip="Browse Curriculum">
                        <i class="fas fa-book-open"></i>
                    </button>
                    <button class="header-btn tooltip" id="liveClassBtn" title="Live Classes" data-tooltip="Live Classes">
                        <i class="fas fa-video"></i>
                    </button>
                    <button class="header-btn tooltip" id="groupSessionBtn" title="Group Sessions" data-tooltip="Study Groups">
                        <i class="fas fa-users"></i>
                    </button>
                    <button class="header-btn badge tooltip" id="notificationsBtn" title="Notifications" data-tooltip="Notifications">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div class="language-selector">
                        <button class="language-selector-btn" id="languageSelectorBtn" aria-haspopup="listbox" aria-expanded="false">
                            <img src="https://flagcdn.com/w20/us.png" class="language-flag" id="currentLanguageFlag" alt="EN">
                            <span id="currentLanguage">EN</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="language-dropdown" id="languageDropdown" role="listbox">
                            <!-- Languages will be added here -->
                        </div>
                    </div>
                    <button class="header-btn tooltip" id="themeToggle" title="Toggle theme" data-tooltip="Switch Light/Dark">
                        <i class="fas fa-moon"></i>
                    </button>
                    <!-- Modern Quick Tools Dropdown -->
                    <div class="model-selector" style="margin-left:0.5rem;">
                        <button class="model-selector-btn" id="quickToolsBtn" aria-haspopup="listbox" aria-expanded="false">
                            <i class="fas fa-magic"></i>
                            <span>Quick Tools</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="model-selector-dropdown" id="quickToolsDropdown" role="listbox" style="min-width:220px;">
                            <div class="model-option" tabindex="0" id="toolSummarize"><i class="fas fa-align-left"></i> Summarize</div>
                            <div class="model-option" tabindex="0" id="toolTranslate"><i class="fas fa-language"></i> Translate</div>
                            <div class="model-option" tabindex="0" id="toolExplainCode"><i class="fas fa-code"></i> Explain Code</div>
                            <div class="model-option" tabindex="0" id="toolGenerateQuiz"><i class="fas fa-question"></i> Generate Quiz</div>
                            <div class="model-option" tabindex="0" id="toolMathSolver"><i class="fas fa-square-root-alt"></i> Math Solver</div>
                            <div class="model-option" tabindex="0" id="toolCitation"><i class="fas fa-quote-right"></i> Citation</div>
                            <div class="model-option" tabindex="0" id="toolDiagram"><i class="fas fa-project-diagram"></i> Diagram</div>
                            <div class="model-option" tabindex="0" id="toolWebSearch"><i class="fas fa-globe"></i> Web Search</div>
                        </div>
                    </div>
                </div>
            </header>

            <main class="ai-main" id="aiMain">
                <!-- Messages will be inserted here by JavaScript -->
                <div class="welcome-banner" style="display:flex;align-items:center;justify-content:center;flex-direction:column;padding:2rem 0 1rem 0;">
                    <img src="https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/svg/1f4bb.svg" alt="AI" style="width:60px;height:60px;margin-bottom:1rem;">
                    <h2 style="font-weight:700;font-size:1.5rem;letter-spacing:0.5px;">Welcome to RabbaAI</h2>
                    <p style="color:var(--text-light);font-size:1rem;text-align:center;max-width:400px;">Your advanced AI-powered learning assistant. Start a conversation, ask a question, or explore the curriculum!</p>
                    <!-- Modern Quick Actions -->
                    <div class="quick-actions" style="margin-top:1.5rem;flex-wrap:wrap;justify-content:center;">
                        <button class="quick-action-btn" id="quickSummarize"><i class="fas fa-align-left"></i> Summarize</button>
                        <button class="quick-action-btn" id="quickTranslate"><i class="fas fa-language"></i> Translate</button>
                        <button class="quick-action-btn" id="quickExplainCode"><i class="fas fa-code"></i> Explain Code</button>
                        <button class="quick-action-btn" id="quickGenerateQuiz"><i class="fas fa-question"></i> Quiz</button>
                        <button class="quick-action-btn" id="quickMathSolver"><i class="fas fa-square-root-alt"></i> Math</button>
                        <button class="quick-action-btn" id="quickCitation"><i class="fas fa-quote-right"></i> Citation</button>
                        <button class="quick-action-btn" id="quickDiagram"><i class="fas fa-project-diagram"></i> Diagram</button>
                        <button class="quick-action-btn" id="quickWebSearch"><i class="fas fa-globe"></i> Search</button>
                    </div>
                </div>
            </main>

            <div class="ai-input-container" style="backdrop-filter: blur(4px);">
                <div class="ai-input-wrapper" style="position:relative;">
                    <textarea class="ai-textarea" id="aiTextarea" placeholder="Type a message, ask a question, or use '/' for quick actions..." rows="1" autocomplete="off" spellcheck="true" aria-label="Message Rabbi AI"></textarea>
                    <div class="input-actions">
                        <button class="input-action-btn tooltip" id="fileUploadBtn" title="Upload file" data-tooltip="Attach file">
                            <i class="fas fa-paperclip"></i>
                            <input type="file" id="fileInput" style="display: none;" multiple>
                        </button>
                        <button class="input-action-btn tooltip" id="voiceInputBtn" title="Voice input" data-tooltip="Voice Input">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="input-action-btn tooltip" id="drawInputBtn" title="Draw/Whiteboard" data-tooltip="Draw">
                            <i class="fas fa-pen-nib"></i>
                        </button>
                        <button class="input-action-btn tooltip" id="mathInputBtn" title="Math Input" data-tooltip="Math Input">
                            <i class="fas fa-square-root-alt"></i>
                        </button>
                        <button class="ai-send-btn tooltip" id="aiSendBtn" disabled title="Send" data-tooltip="Send">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    <div id="filePreviewContainer" style="display: none;"></div>
                    <!-- Command palette/quick actions (hidden by default, shown on '/') -->
                    <div id="quickCommandPalette" style="display:none;position:absolute;bottom:60px;left:0;width:100%;z-index:50;background:var(--card-bg);border:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:var(--shadow-lg);padding:0.5rem 0;">
                        <!-- JS will populate quick actions here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
                <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="fas fa-cog" style="color:var(--primary-color);"></i>
                    Settings
                </div>
                <button class="modal-close" id="modalClose" aria-label="Close settings">&times;</button>
            </div>
            <div class="modal-body" style="padding:0;">
                <div class="tabs" style="position:sticky;top:60px;background:var(--bg-color);z-index:1;">
                    <div class="tab active" data-tab="account"><i class="fas fa-user"></i> <span>Account</span></div>
                    <div class="tab" data-tab="preferences"><i class="fas fa-sliders-h"></i> <span>Preferences</span></div>
                    <div class="tab" data-tab="ai"><i class="fas fa-brain"></i> <span>AI</span></div>
                    <div class="tab" data-tab="privacy"><i class="fas fa-shield-alt"></i> <span>Privacy</span></div>
                </div>
                <!-- Account Tab -->
                <div class="tab-content" id="accountTab" style="padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </div>
                        <div class="settings-option" style="align-items:flex-start;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-user-circle"></i>
                                </div>
                                <span>Avatar</span>
                            </div>
                            <div class="settings-option-value" style="display:flex;align-items:center;gap:1rem;">
                                <div id="settingsAvatarPreview" style="width:48px;height:48px;border-radius:50%;background:#eee url('https://ui-avatars.com/api/?name=John+Doe&background=6c5ce7&color=fff&rounded=true&size=48') center/cover no-repeat;box-shadow:0 2px 8px rgba(0,0,0,0.08);"></div>
                                <input type="file" id="avatarUpload" accept="image/*" style="display:none;">
                                <button class="quick-action-btn" id="changeAvatarBtn"><i class="fas fa-upload"></i> Change</button>
                            </div>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-signature"></i>
                                </div>
                                <span>Name</span>
                            </div>
                            <div class="settings-option-value">
                                <input type="text" id="userNameInput" value="John Doe" class="quick-action-btn" style="border:none;background:transparent;padding:0;font-weight:500;font-size:1.05rem;">
                            </div>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <span>Email</span>
                            </div>
                            <div class="settings-option-value">
                                <input type="email" id="userEmailInput" value="john.doe@example.com" class="quick-action-btn" style="border:none;background:transparent;padding:0;">
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-shield-alt"></i>
                            <span>Security</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-key"></i>
                                </div>
                                <span>Password</span>
                            </div>
                            <button class="quick-action-btn" id="changePasswordBtn"><i class="fas fa-edit"></i> Change</button>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <span>Two-factor Authentication</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="twoFactorToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-graduation-cap"></i>
                            <span>Learning Profile</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-school"></i>
                                </div>
                                <span>School</span>
                            </div>
                            <input type="text" id="schoolInput" value="Lincoln High School" class="quick-action-btn" style="border:none;background:transparent;padding:0;">
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-user-graduate"></i>
                                </div>
                                <span>Grade Level</span>
                            </div>
                            <select id="gradeLevelSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option>9th Grade</option>
                                <option>10th Grade</option>
                                <option>11th Grade</option>
                                <option>12th Grade</option>
                            </select>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-bullseye"></i>
                                </div>
                                <span>Learning Goals</span>
                            </div>
                            <button class="quick-action-btn" id="editGoalsBtn"><i class="fas fa-bullseye"></i> Edit</button>
                        </div>
                    </div>
                </div>
                <!-- Preferences Tab -->
                <div class="tab-content" id="preferencesTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-paint-brush"></i>
                            <span>Appearance</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-moon"></i>
                                </div>
                                <span>Dark Mode</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="darkModeToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-font"></i>
                                </div>
                                <span>Font Size</span>
                            </div>
                            <select id="fontSizeSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                            </select>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-palette"></i>
                                </div>
                                <span>Theme Color</span>
                            </div>
                            <div class="color-picker" style="display:flex;gap:0.5rem;">
                                <div class="color-option" data-color="#6c5ce7" style="background:#6c5ce7;border:2px solid #fff;box-shadow:0 1px 4px rgba(108,92,231,0.15);"></div>
                                <div class="color-option" data-color="#00b894" style="background:#00b894;"></div>
                                <div class="color-option" data-color="#fdcb6e" style="background:#fdcb6e;"></div>
                                <div class="color-option" data-color="#d63031" style="background:#d63031;"></div>
                                <div class="color-option" data-color="#0984e3" style="background:#0984e3;"></div>
                                <div class="color-option" data-color="#222f3e" style="background:#222f3e;"></div>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-bell"></i>
                            <span>Notifications</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <span>Email Notifications</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="emailNotificationsToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <span>Push Notifications</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="pushNotificationsToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-comment-alt"></i>
                                </div>
                                <span>Message Sounds</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="messageSoundsToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-history"></i>
                            <span>Chat History</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-save"></i>
                                </div>
                                <span>Save Chat History</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="historyToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <span>Auto-delete After</span>
                            </div>
                            <select id="autoDeleteSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option value="never">Never</option>
                                <option value="30">30 days</option>
                                <option value="90">90 days</option>
                                <option value="365">1 year</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- AI Tab -->
                <div class="tab-content" id="aiTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-robot"></i>
                            <span>AI Behavior</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-brain"></i>
                                </div>
                                <span>Default Mode</span>
                            </div>
                            <select id="defaultModeSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option value="tutor">Tutor Mode</option>
                                <option value="quiz">Quiz Mode</option>
                                <option value="assignment">Assignment Mode</option>
                                <option value="study">Study Buddy</option>
                                <option value="research">Research Assistant</option>
                            </select>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-language"></i>
                                </div>
                                <span>Default Language</span>
                            </div>
                            <select id="defaultLanguageSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option value="en">English</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="de">German</option>
                                <option value="zh">Chinese</option>
                                <option value="ja">Japanese</option>
                                <option value="ko">Korean</option>
                                <option value="ru">Russian</option>
                            </select>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-comment-alt"></i>
                                </div>
                                <span>Response Style</span>
                            </div>
                            <select id="responseStyleSelect" class="quick-action-btn" style="border:none;background:var(--quick-action-bg);">
                                <option value="concise">Concise</option>
                                <option value="detailed">Detailed</option>
                                <option value="technical">Technical</option>
                                <option value="casual">Casual</option>
                            </select>
                        </div>
                        <div class="settings-option" style="align-items:flex-start;">
                            <div class="settings-option-label" style="align-items:flex-start;">
                                <div class="settings-option-icon">
                                    <i class="fas fa-lightbulb"></i>
                                </div>
                                <span>Creativity Level</span>
                            </div>
                            <div style="flex:1;max-width:220px;">
                                <input type="range" id="creativitySlider" min="0" max="2" step="0.5" value="1" style="width:100%;">
                                <div style="display:flex;justify-content:space-between;font-size:0.75rem;">
                                    <span>Precise</span>
                                    <span>Balanced</span>
                                    <span>Creative</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-user-graduate"></i>
                            <span>Learning Assistant</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-microscope"></i>
                                </div>
                                <span>Deep Thinking Mode</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="deepThinkToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <span>Web Search</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="webSearchToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-book"></i>
                                </div>
                                <span>Memory Context</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="memoryToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-code"></i>
                                </div>
                                <span>Code Execution</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="codeExecutionToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <!-- Privacy Tab -->
                <div class="tab-content" id="privacyTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-shield-alt"></i>
                            <span>Data Management</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-trash"></i>
                                </div>
                                <span>Clear Chat History</span>
                            </div>
                            <button class="quick-action-btn" id="clearHistoryBtn"><i class="fas fa-trash"></i> Clear</button>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-download"></i>
                                </div>
                                <span>Export Data</span>
                            </div>
                            <button class="quick-action-btn" id="exportDataBtn"><i class="fas fa-download"></i> Export</button>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-upload"></i>
                                </div>
                                <span>Import Data</span>
                            </div>
                            <button class="quick-action-btn" id="importDataBtn"><i class="fas fa-upload"></i> Import</button>
                            <input type="file" id="importDataInput" style="display:none;" accept=".json">
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-lock"></i>
                            <span>Privacy Controls</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <span>Data Collection</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="dataCollectionToggle" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-user-secret"></i>
                                </div>
                                <span>Anonymous Mode</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="anonymousModeToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-server"></i>
                                </div>
                                <span>Local Processing</span>
                            </div>
                            <label class="toggle-switch" style="margin-left:auto;">
                                <input type="checkbox" id="localProcessingToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-user-tie"></i>
                            <span>Account</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-sign-out-alt"></i>
                                </div>
                                <span>Log Out</span>
                            </div>
                            <button class="quick-action-btn" id="logoutBtn"><i class="fas fa-sign-out-alt"></i> Log Out</button>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-user-slash"></i>
                                </div>
                                <span>Delete Account</span>
                            </div>
                            <button class="quick-action-btn danger" id="deleteAccountBtn"><i class="fas fa-user-slash"></i> Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Modal (Advanced & Modern) -->
    <div class="modal-overlay" id="notificationsModal">
        <div class="modal" style="max-width: 500px;">
            <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
                <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="fas fa-bell" style="color:var(--primary-color);"></i>
                    Notifications
                </div>
                <button class="modal-close" id="notificationsModalClose" aria-label="Close notifications">&times;</button>
            </div>
            <div class="modal-body" style="padding:0;">
                <!-- Notification Controls -->
                <div style="display:flex;align-items:center;justify-content:space-between;padding:1rem;border-bottom:1px solid var(--border-color);background:var(--card-bg);position:sticky;top:60px;z-index:1;">
                    <div style="display:flex;gap:0.5rem;">
                        <button class="quick-action-btn" id="markAllReadBtn"><i class="fas fa-check-double"></i> Mark all as read</button>
                        <button class="quick-action-btn" id="clearAllNotificationsBtn"><i class="fas fa-trash"></i> Clear all</button>
                    </div>
                    <select class="quick-action-btn" id="notificationFilter" style="min-width:120px;">
                        <option value="all">All</option>
                        <option value="unread">Unread</option>
                        <option value="assignments">Assignments</option>
                        <option value="classes">Classes</option>
                        <option value="messages">Messages</option>
                        <option value="quizzes">Quizzes</option>
                    </select>
                </div>
                <!-- Notification List -->
                <div id="notificationList" style="max-height:400px;overflow-y:auto;">
                    <!-- Example notification item -->
                    <div class="notification-item unread" style="display:flex;align-items:flex-start;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-color);background:var(--quick-action-bg);position:relative;">
                        <div class="notification-icon" style="font-size:1.5rem;color:var(--primary-color);">
                            <i class="fas fa-book"></i>
                        </div>
                        <div class="notification-content" style="flex:1;">
                            <div class="notification-title" style="font-weight:600;">New assignment posted</div>
                            <div class="notification-desc" style="color:var(--text-light);">Math homework due Friday</div>
                            <div class="notification-time" style="font-size:0.8rem;color:var(--text-light);">2 hours ago</div>
                            <div class="notification-actions" style="margin-top:0.5rem;display:flex;gap:0.5rem;">
                                <button class="quick-action-btn primary" title="View Assignment"><i class="fas fa-eye"></i></button>
                                <button class="quick-action-btn" title="Mark as read"><i class="fas fa-check"></i></button>
                                <button class="quick-action-btn" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Assignment</span>
                    </div>
                    <div class="notification-item" style="display:flex;align-items:flex-start;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-color);position:relative;">
                        <div class="notification-icon" style="font-size:1.5rem;color:var(--secondary-color);">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="notification-content" style="flex:1;">
                            <div class="notification-title" style="font-weight:600;">Upcoming class</div>
                            <div class="notification-desc" style="color:var(--text-light);">Chemistry lab at 10:00 AM</div>
                            <div class="notification-time" style="font-size:0.8rem;color:var(--text-light);">1 day ago</div>
                            <div class="notification-actions" style="margin-top:0.5rem;display:flex;gap:0.5rem;">
                                <button class="quick-action-btn primary" title="Join Class"><i class="fas fa-video"></i></button>
                                <button class="quick-action-btn" title="Add to Calendar"><i class="fas fa-calendar-plus"></i></button>
                                <button class="quick-action-btn" title="Mark as read"><i class="fas fa-check"></i></button>
                            </div>
                        </div>
                        <span class="badge secondary" style="position:absolute;top:1rem;right:1rem;">Class</span>
                    </div>
                    <div class="notification-item unread" style="display:flex;align-items:flex-start;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-color);background:var(--quick-action-bg);position:relative;">
                        <div class="notification-icon" style="font-size:1.5rem;color:var(--info-color);">
                            <i class="fas fa-comment"></i>
                        </div>
                        <div class="notification-content" style="flex:1;">
                            <div class="notification-title" style="font-weight:600;">New message</div>
                            <div class="notification-desc" style="color:var(--text-light);">Mrs. Johnson replied to your question</div>
                            <div class="notification-time" style="font-size:0.8rem;color:var(--text-light);">3 days ago</div>
                            <div class="notification-actions" style="margin-top:0.5rem;display:flex;gap:0.5rem;">
                                <button class="quick-action-btn primary" title="View Message"><i class="fas fa-envelope-open"></i></button>
                                <button class="quick-action-btn" title="Reply"><i class="fas fa-reply"></i></button>
                                <button class="quick-action-btn" title="Mark as read"><i class="fas fa-check"></i></button>
                            </div>
                        </div>
                        <span class="badge" style="position:absolute;top:1rem;right:1rem;">Message</span>
                    </div>
                    <div class="notification-item" style="display:flex;align-items:flex-start;gap:1rem;padding:1rem;border-bottom:1px solid var(--border-color);position:relative;">
                        <div class="notification-icon" style="font-size:1.5rem;color:var(--accent-color);">
                            <i class="fas fa-certificate"></i>
                        </div>
                        <div class="notification-content" style="flex:1;">
                            <div class="notification-title" style="font-weight:600;">Quiz results</div>
                            <div class="notification-desc" style="color:var(--text-light);">You scored 92% on History quiz</div>
                            <div class="notification-time" style="font-size:0.8rem;color:var(--text-light);">1 week ago</div>
                            <div class="notification-actions" style="margin-top:0.5rem;display:flex;gap:0.5rem;">
                                <button class="quick-action-btn primary" title="View Results"><i class="fas fa-chart-bar"></i></button>
                                <button class="quick-action-btn" title="Share"><i class="fas fa-share"></i></button>
                                <button class="quick-action-btn" title="Mark as read"><i class="fas fa-check"></i></button>
                            </div>
                        </div>
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Quiz</span>
                    </div>
                    <!-- Empty state -->
                    <div id="noNotifications" style="display:none;text-align:center;padding:2rem;color:var(--text-light);">
                        <i class="fas fa-inbox" style="font-size:2.5rem;margin-bottom:1rem;opacity:0.5;"></i>
                        <div>No notifications found.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Notification actions
        const notificationList = document.getElementById('notificationList');
        const markAllReadBtn = document.getElementById('markAllReadBtn');
        const clearAllNotificationsBtn = document.getElementById('clearAllNotificationsBtn');
        const notificationFilter = document.getElementById('notificationFilter');
        const noNotifications = document.getElementById('noNotifications');

        // Mark all as read
        if (markAllReadBtn) {
            markAllReadBtn.addEventListener('click', function() {
                notificationList.querySelectorAll('.notification-item').forEach(item => {
                    item.classList.remove('unread');
                });
            });
        }
        // Clear all notifications
        if (clearAllNotificationsBtn) {
            clearAllNotificationsBtn.addEventListener('click', function() {
                notificationList.innerHTML = '';
                noNotifications.style.display = 'block';
            });
        }
        // Filter notifications
        if (notificationFilter) {
            notificationFilter.addEventListener('change', function() {
                const val = this.value;
                let found = false;
                notificationList.querySelectorAll('.notification-item').forEach(item => {
                    let show = false;
                    if (val === 'all') show = true;
                    else if (val === 'unread' && item.classList.contains('unread')) show = true;
                    else if (val === 'assignments' && item.innerHTML.includes('Assignment')) show = true;
                    else if (val === 'classes' && item.innerHTML.includes('Class')) show = true;
                    else if (val === 'messages' && item.innerHTML.includes('Message')) show = true;
                    else if (val === 'quizzes' && item.innerHTML.includes('Quiz')) show = true;
                    item.style.display = show ? 'flex' : 'none';
                    if (show) found = true;
                });
                noNotifications.style.display = found ? 'none' : 'block';
            });
        }
        // Per-notification actions
        notificationList.querySelectorAll('.notification-item').forEach(item => {
            item.querySelectorAll('.quick-action-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    if (btn.title === "Mark as read") {
                        item.classList.remove('unread');
                    }
                    if (btn.title === "Delete") {
                        item.remove();
                        if (!notificationList.querySelector('.notification-item')) {
                            noNotifications.style.display = 'block';
                        }
                    }
                });
            });
        });
    });
    </script>
    <style>
    /* Modern notification styles */
    .notification-item.unread {
        border-left: 4px solid var(--primary-color);
        background: linear-gradient(90deg, var(--primary-color) 0 2%, transparent 2% 100%);
    }
    .notification-item:hover {
        background: var(--quick-action-hover);
        cursor: pointer;
    }
    .notification-actions .quick-action-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.9rem;
    }
    </style>

    <!-- Learning Goals Modal (Advanced & Modern) -->
    <div class="modal-overlay" id="goalsModal">
        <div class="modal" style="max-width: 600px;">
            <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
                <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="fas fa-bullseye" style="color:var(--primary-color);"></i>
                    Learning Goals
                </div>
                <button class="modal-close" id="goalsModalClose" aria-label="Close goals">&times;</button>
            </div>
            <div class="modal-body" style="padding:0;">
                <div class="tabs" style="position:sticky;top:60px;background:var(--bg-color);z-index:1;">
                    <div class="tab active" data-goal-tab="overview"><i class="fas fa-list-alt"></i> <span>Overview</span></div>
                    <div class="tab" data-goal-tab="subjects"><i class="fas fa-book"></i> <span>Subjects</span></div>
                    <div class="tab" data-goal-tab="timeline"><i class="fas fa-calendar-alt"></i> <span>Timeline</span></div>
                    <div class="tab" data-goal-tab="progress"><i class="fas fa-chart-line"></i> <span>Progress</span></div>
                </div>
                <!-- Overview Tab -->
                <div class="tab-content" id="goalsOverviewTab" style="padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-bullseye"></i>
                            <span>Primary Goal</span>
                        </div>
                        <select id="primaryGoalSelect" class="quick-action-btn" style="width: 100%; margin-bottom: 1rem;">
                            <option>College Preparation</option>
                            <option>Skill Development</option>
                            <option>Grade Improvement</option>
                            <option>Test Preparation</option>
                            <option>Personal Interest</option>
                            <option>Career Exploration</option>
                            <option>Extracurricular Excellence</option>
                        </select>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-lightbulb"></i>
                            <span>Motivation</span>
                        </div>
                        <textarea id="goalMotivation" class="quick-action-btn" style="width:100%;min-height:60px;" placeholder="What motivates you to achieve your goals?"></textarea>
                    </div>
                </div>
                <!-- Subjects Tab -->
                <div class="tab-content" id="goalsSubjectsTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-list"></i>
                            <span>Subject Goals</span>
                            <span class="badge" style="margin-left:0.5rem;background:var(--info-color);color:white;">Track & Prioritize</span>
                        </div>
                        <div id="goalsList" style="margin-bottom:1rem;">
                            <div class="goal-item" style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
                                <input type="text" value="Improve Algebra skills" class="quick-action-btn" style="flex:1;">
                                <select class="quick-action-btn" style="min-width:110px;">
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                                <button class="quick-action-btn delete-goal" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                            <div class="goal-item" style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
                                <input type="text" value="Read 5 classic novels" class="quick-action-btn" style="flex:1;">
                                <select class="quick-action-btn" style="min-width:110px;">
                                    <option>High</option>
                                    <option>Medium</option>
                                    <option>Low</option>
                                </select>
                                <button class="quick-action-btn delete-goal" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <button class="quick-action-btn" id="addGoalBtn" style="margin-top: 0.5rem;"><i class="fas fa-plus"></i> Add Goal</button>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-star"></i>
                            <span>Milestones</span>
                        </div>
                        <div id="milestonesList">
                            <div class="goal-item" style="display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;">
                                <input type="text" value="Score 90%+ on next math test" class="quick-action-btn" style="flex:1;">
                                <button class="quick-action-btn delete-goal" title="Delete"><i class="fas fa-trash"></i></button>
                            </div>
                        </div>
                        <button class="quick-action-btn" id="addMilestoneBtn" style="margin-top: 0.5rem;"><i class="fas fa-plus"></i> Add Milestone</button>
                    </div>
                </div>
                <!-- Timeline Tab -->
                <div class="tab-content" id="goalsTimelineTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-calendar"></i>
                            <span>Timeline</span>
                        </div>
                        <div class="settings-option">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <span>Target Completion</span>
                            </div>
                            <input type="date" id="goalCompletionDate" class="quick-action-btn" style="border: none; background: var(--quick-action-bg);">
                        </div>
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-calendar-week"></i>
                                </div>
                                <span>Weekly Commitment</span>
                            </div>
                            <input type="number" min="1" max="40" id="weeklyHours" class="quick-action-btn" style="width:80px;" placeholder="hrs">
                            <span style="margin-left:0.5rem;">hours/week</span>
                        </div>
                    </div>
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-bell"></i>
                            <span>Reminders</span>
                        </div>
                        <label class="toggle-switch" style="margin-left:0;">
                            <input type="checkbox" id="goalRemindersToggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span style="margin-left:1rem;font-size:0.9rem;color:var(--text-light);">Get notified about your goals</span>
                    </div>
                </div>
                <!-- Progress Tab -->
                <div class="tab-content" id="goalsProgressTab" style="display:none;padding:2rem;">
                    <div class="settings-section">
                        <div class="settings-section-title">
                            <i class="fas fa-chart-line"></i>
                            <span>Progress Tracker</span>
                        </div>
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-card-value" id="goalsCompleted">2</div>
                                <div class="stat-card-label">Goals Completed</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-card-value" id="goalsActive">3</div>
                                <div class="stat-card-label">Active Goals</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-card-value" id="milestonesAchieved">1</div>
                                <div class="stat-card-label">Milestones Achieved</div>
                            </div>
                        </div>
                        <div class="progress-chart" style="margin-top:2rem;">
                            <canvas id="goalsProgressChart" height="120"></canvas>
                        </div>
                    </div>
                </div>
                <div style="padding:2rem;border-top:1px solid var(--border-color);background:var(--card-bg);display:flex;gap:1rem;justify-content:flex-end;">
                    <button class="quick-action-btn" id="cancelGoalsBtn">Cancel</button>
                    <button class="quick-action-btn primary" id="saveGoalsBtn">Save Goals</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Chart.js for progress chart (optional, only if not already included) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Tab switching for goals modal
        const goalTabs = document.querySelectorAll('#goalsModal .tab');
        goalTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('#goalsModal .tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('#goalsModal .tab-content').forEach(c => c.style.display = 'none');
                this.classList.add('active');
                const tabId = 'goals' + this.getAttribute('data-goal-tab').charAt(0).toUpperCase() + this.getAttribute('data-goal-tab').slice(1) + 'Tab';
                document.getElementById(tabId).style.display = 'block';
            });
        });

        // Add/Remove Subject Goals
        const goalsList = document.getElementById('goalsList');
        const addGoalBtn = document.getElementById('addGoalBtn');
        addGoalBtn.addEventListener('click', function() {
            const goalItem = document.createElement('div');
            goalItem.className = 'goal-item';
            goalItem.style = 'display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;';
            goalItem.innerHTML = `
                <input type="text" class="quick-action-btn" style="flex:1;" placeholder="New subject goal">
                <select class="quick-action-btn" style="min-width:110px;">
                    <option>High</option>
                    <option>Medium</option>
                    <option>Low</option>
                </select>
                <button class="quick-action-btn delete-goal" title="Delete"><i class="fas fa-trash"></i></button>
            `;
            goalsList.appendChild(goalItem);
            goalItem.querySelector('.delete-goal').addEventListener('click', function() {
                goalItem.remove();
            });
        });
        goalsList.querySelectorAll('.delete-goal').forEach(btn => {
            btn.addEventListener('click', function() {
                btn.parentElement.remove();
            });
        });

        // Add/Remove Milestones
        const milestonesList = document.getElementById('milestonesList');
        const addMilestoneBtn = document.getElementById('addMilestoneBtn');
        addMilestoneBtn.addEventListener('click', function() {
            const milestoneItem = document.createElement('div');
            milestoneItem.className = 'goal-item';
            milestoneItem.style = 'display:flex;align-items:center;gap:0.5rem;margin-bottom:0.5rem;';
            milestoneItem.innerHTML = `
                <input type="text" class="quick-action-btn" style="flex:1;" placeholder="New milestone">
                <button class="quick-action-btn delete-goal" title="Delete"><i class="fas fa-trash"></i></button>
            `;
            milestonesList.appendChild(milestoneItem);
            milestoneItem.querySelector('.delete-goal').addEventListener('click', function() {
                milestoneItem.remove();
            });
        });
        milestonesList.querySelectorAll('.delete-goal').forEach(btn => {
            btn.addEventListener('click', function() {
                btn.parentElement.remove();
            });
        });

        // Cancel button closes modal
        document.getElementById('cancelGoalsBtn').addEventListener('click', function() {
            document.getElementById('goalsModal').classList.remove('active');
        });

        // Progress Chart (demo data)
        if (window.Chart) {
            const ctx = document.getElementById('goalsProgressChart').getContext('2d');
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Completed', 'Active', 'Remaining'],
                    datasets: [{
                        data: [2, 3, 5],
                        backgroundColor: [
                            'var(--success-color)',
                            'var(--primary-color)',
                            'var(--quick-action-bg)'
                        ],
                        borderWidth: 2
                    }]
                },
                options: {
                    cutout: '70%',
                    plugins: {
                        legend: { display: true, position: 'bottom' }
                    }
                }
            });
        }
    });
    </script>

    <!-- Change Password Modal (Advanced & Modern) -->
    <div class="modal-overlay" id="passwordModal">
        <div class="modal" style="max-width: 480px;">
            <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
                <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="fas fa-lock" style="color:var(--primary-color);"></i>
                    Change Password
                </div>
                <button class="modal-close" id="passwordModalClose" aria-label="Close password modal">&times;</button>
            </div>
            <div class="modal-body" style="padding:2rem;">
                <form id="changePasswordForm" autocomplete="off">
                    <div class="settings-section" style="margin-bottom:1.5rem;">
                        <div class="settings-section-title" style="gap:0.5rem;">
                            <i class="fas fa-key"></i>
                            <span>Update your password</span>
                        </div>
                        <div class="settings-option" style="align-items:flex-end;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <span>Current Password</span>
                            </div>
                            <div style="position:relative;width:100%;">
                                <input type="password" id="currentPassword" class="quick-action-btn" style="width:100%;padding-right:2.5rem;" placeholder="Enter current password" required>
                                <button type="button" class="quick-action-btn" id="toggleCurrentPassword" style="position:absolute;right:0.5rem;top:50%;transform:translateY(-50%);background:none;"><i class="fas fa-eye"></i></button>
                            </div>
                        </div>
                        <div class="settings-option" style="align-items:flex-end;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-key"></i>
                                </div>
                                <span>New Password</span>
                            </div>
                            <div style="position:relative;width:100%;">
                                <input type="password" id="newPassword" class="quick-action-btn" style="width:100%;padding-right:2.5rem;" placeholder="Enter new password" required minlength="8">
                                <button type="button" class="quick-action-btn" id="toggleNewPassword" style="position:absolute;right:0.5rem;top:50%;transform:translateY(-50%);background:none;"><i class="fas fa-eye"></i></button>
                            </div>
                        </div>
                        <div class="settings-option" style="align-items:flex-end;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon">
                                    <i class="fas fa-key"></i>
                                </div>
                                <span>Confirm Password</span>
                            </div>
                            <div style="position:relative;width:100%;">
                                <input type="password" id="confirmPassword" class="quick-action-btn" style="width:100%;padding-right:2.5rem;" placeholder="Confirm new password" required>
                                <button type="button" class="quick-action-btn" id="toggleConfirmPassword" style="position:absolute;right:0.5rem;top:50%;transform:translateY(-50%);background:none;"><i class="fas fa-eye"></i></button>
                            </div>
                        </div>
                        <div class="password-strength" style="margin-top:1rem;">
                            <div class="progress-bar">
                                <div class="progress-bar-fill" id="passwordStrengthBar"></div>
                            </div>
                            <div id="passwordStrengthText" style="font-size:0.85rem;text-align:center;margin-top:0.25rem;">Weak</div>
                            <ul id="passwordChecklist" style="font-size:0.85rem;color:var(--text-light);margin:0.5rem 0 0 0.5rem;list-style:none;padding:0;">
                                <li id="pw-length"><i class="fas fa-times-circle" style="color:var(--danger-color);"></i> At least 8 characters</li>
                                <li id="pw-uppercase"><i class="fas fa-times-circle" style="color:var(--danger-color);"></i> Uppercase letter</li>
                                <li id="pw-lowercase"><i class="fas fa-times-circle" style="color:var(--danger-color);"></i> Lowercase letter</li>
                                <li id="pw-number"><i class="fas fa-times-circle" style="color:var(--danger-color);"></i> Number</li>
                                <li id="pw-symbol"><i class="fas fa-times-circle" style="color:var(--danger-color);"></i> Symbol</li>
                            </ul>
                        </div>
                        <div id="passwordError" style="color:var(--danger-color);font-size:0.95rem;margin-top:0.5rem;display:none;"></div>
                        <button type="submit" class="quick-action-btn primary" id="savePasswordBtn" style="width:100%;margin-top:1.5rem;">Change Password</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Password show/hide toggles
        function togglePassword(inputId, btnId) {
            const input = document.getElementById(inputId);
            const btn = document.getElementById(btnId);
            btn.addEventListener('click', function() {
                if (input.type === 'password') {
                    input.type = 'text';
                    btn.querySelector('i').classList.remove('fa-eye');
                    btn.querySelector('i').classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    btn.querySelector('i').classList.remove('fa-eye-slash');
                    btn.querySelector('i').classList.add('fa-eye');
                }
            });
        }
        togglePassword('currentPassword', 'toggleCurrentPassword');
        togglePassword('newPassword', 'toggleNewPassword');
        togglePassword('confirmPassword', 'toggleConfirmPassword');

        // Password strength and checklist
        const newPassword = document.getElementById('newPassword');
        const passwordStrengthBar = document.getElementById('passwordStrengthBar');
        const passwordStrengthText = document.getElementById('passwordStrengthText');
        const checklist = {
            length: document.getElementById('pw-length'),
            uppercase: document.getElementById('pw-uppercase'),
            lowercase: document.getElementById('pw-lowercase'),
            number: document.getElementById('pw-number'),
            symbol: document.getElementById('pw-symbol')
        };
        newPassword.addEventListener('input', function() {
            const val = newPassword.value;
            let score = 0;
            // Criteria
            const hasLength = val.length >= 8;
            const hasUpper = /[A-Z]/.test(val);
            const hasLower = /[a-z]/.test(val);
            const hasNumber = /[0-9]/.test(val);
            const hasSymbol = /[^A-Za-z0-9]/.test(val);

            // Checklist UI
            checklist.length.innerHTML = (hasLength ? '<i class="fas fa-check-circle" style="color:var(--success-color);"></i>' : '<i class="fas fa-times-circle" style="color:var(--danger-color);"></i>') + ' At least 8 characters';
            checklist.uppercase.innerHTML = (hasUpper ? '<i class="fas fa-check-circle" style="color:var(--success-color);"></i>' : '<i class="fas fa-times-circle" style="color:var(--danger-color);"></i>') + ' Uppercase letter';
            checklist.lowercase.innerHTML = (hasLower ? '<i class="fas fa-check-circle" style="color:var(--success-color);"></i>' : '<i class="fas fa-times-circle" style="color:var(--danger-color);"></i>') + ' Lowercase letter';
            checklist.number.innerHTML = (hasNumber ? '<i class="fas fa-check-circle" style="color:var(--success-color);"></i>' : '<i class="fas fa-times-circle" style="color:var(--danger-color);"></i>') + ' Number';
            checklist.symbol.innerHTML = (hasSymbol ? '<i class="fas fa-check-circle" style="color:var(--success-color);"></i>' : '<i class="fas fa-times-circle" style="color:var(--danger-color);"></i>') + ' Symbol';

            // Score
            score += hasLength ? 25 : 0;
            score += hasUpper ? 15 : 0;
            score += hasLower ? 15 : 0;
            score += hasNumber ? 15 : 0;
            score += hasSymbol ? 30 : 0;

            // Bar and text
            passwordStrengthBar.style.width = score + '%';
            if (score < 40) {
                passwordStrengthBar.style.backgroundColor = 'var(--danger-color)';
                passwordStrengthText.textContent = 'Weak';
            } else if (score < 70) {
                passwordStrengthBar.style.backgroundColor = 'var(--warning-color)';
                passwordStrengthText.textContent = 'Medium';
            } else {
                passwordStrengthBar.style.backgroundColor = 'var(--success-color)';
                passwordStrengthText.textContent = 'Strong';
            }
        });

        // Modern validation and UX
        const changePasswordForm = document.getElementById('changePasswordForm');
        const passwordError = document.getElementById('passwordError');
        changePasswordForm.addEventListener('submit', function(e) {
            e.preventDefault();
            passwordError.style.display = 'none';
            const current = document.getElementById('currentPassword').value;
            const newPw = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;

            // Demo validation (replace with real backend logic)
            if (!current || !newPw || !confirm) {
                passwordError.textContent = 'Please fill in all fields.';
                passwordError.style.display = 'block';
                return;
            }
            if (newPw !== confirm) {
                passwordError.textContent = 'New passwords do not match.';
                passwordError.style.display = 'block';
                return;
            }
            if (newPw.length < 8 || !/[A-Z]/.test(newPw) || !/[a-z]/.test(newPw) || !/[0-9]/.test(newPw) || !/[^A-Za-z0-9]/.test(newPw)) {
                passwordError.textContent = 'Password does not meet requirements.';
                passwordError.style.display = 'block';
                return;
            }
            // Simulate success
            passwordError.style.display = 'none';
            document.getElementById('passwordModal').classList.remove('active');
            if (typeof showToast === 'function') showToast('Password changed successfully', 'success');
        });
    });
    </script>

    <!-- Delete Account Modal (Advanced & Modern) -->
    <div class="modal-overlay" id="deleteAccountModal">
        <div class="modal" style="max-width: 480px;">
            <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
                <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                    <i class="fas fa-user-slash" style="color:var(--danger-color);"></i>
                    Delete Account
                </div>
                <button class="modal-close" id="deleteAccountModalClose" aria-label="Close delete account modal">&times;</button>
            </div>
            <div class="modal-body" style="padding:2rem;">
                <div style="margin-bottom: 1.5rem; text-align:center;">
                    <i class="fas fa-exclamation-triangle" style="font-size:2.5rem;color:var(--danger-color);margin-bottom:0.5rem;"></i>
                    <h3 style="color:var(--danger-color);margin-bottom:0.5rem;">This action is permanent!</h3>
                    <p style="color:var(--text-light);font-size:1rem;">
                        Deleting your account will <strong>permanently erase</strong> all your data, chat history, learning progress, and settings. This cannot be undone.
                    </p>
                </div>
                <div class="settings-section" style="margin-bottom:1.5rem;">
                    <div class="settings-section-title" style="color:var(--danger-color);gap:0.5rem;">
                        <i class="fas fa-key"></i>
                        Confirm Your Identity
                    </div>
                    <div class="settings-option" style="flex-direction:column;align-items:stretch;gap:0.5rem;">
                        <label for="deleteAccountPassword" style="font-weight:500;color:var(--text-light);margin-bottom:0.25rem;display:flex;align-items:center;gap:0.5rem;">
                            <span class="settings-option-icon" style="color:var(--danger-color);"><i class="fas fa-lock"></i></span>
                            Password
                        </label>
                        <div style="position:relative;width:100%;">
                        </div>
                        <div style="position:relative;width:100%;">
                            <input type="password" id="deleteAccountPassword" class="quick-action-btn" style="width:100%;padding-right:2.5rem;" placeholder="Enter your password" required>
                            <button type="button" class="quick-action-btn" id="toggleDeleteAccountPassword" style="position:absolute;right:0.5rem;top:50%;transform:translateY(-50%);background:none;"><i class="fas fa-eye"></i></button>
                        </div>
                    </div>
                </div>
                <div class="settings-section" style="margin-bottom:1.5rem;">
                    <div class="settings-section-title" style="gap:0.5rem;">
                        <i class="fas fa-comment"></i>
                        Feedback <span style="color:var(--text-light);font-size:0.9rem;">(optional)</span>
                    </div>
                    <textarea id="deleteAccountFeedback" class="quick-action-btn" style="width:100%;min-height:80px;" placeholder="Let us know why you're leaving..."></textarea>
                </div>
                <div id="deleteAccountError" style="color:var(--danger-color);font-size:0.95rem;margin-bottom:1rem;display:none;text-align:center;"></div>
                <div style="display:flex;gap:0.75rem;justify-content:flex-end;">
                    <button class="quick-action-btn" id="cancelDeleteAccountBtn" style="flex:1;">Cancel</button>
                    <button class="quick-action-btn danger" id="confirmDeleteAccountBtn" style="flex:1;"><i class="fas fa-user-slash"></i> Delete Account</button>
                </div>
            </div>
        </div>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Show/hide password
        const pwInput = document.getElementById('deleteAccountPassword');
        const pwToggle = document.getElementById('toggleDeleteAccountPassword');
        if (pwToggle && pwInput) {
            pwToggle.addEventListener('click', function() {
                if (pwInput.type === 'password') {
                    pwInput.type = 'text';
                    pwToggle.querySelector('i').classList.remove('fa-eye');
                    pwToggle.querySelector('i').classList.add('fa-eye-slash');
                } else {
                    pwInput.type = 'password';
                    pwToggle.querySelector('i').classList.remove('fa-eye-slash');
                    pwToggle.querySelector('i').classList.add('fa-eye');
                }
            });
        }

        // Confirm delete logic
        const confirmBtn = document.getElementById('confirmDeleteAccountBtn');
        const errorDiv = document.getElementById('deleteAccountError');
        if (confirmBtn) {
            confirmBtn.addEventListener('click', function() {
                errorDiv.style.display = 'none';
                const pw = pwInput.value.trim();
                if (!pw) {
                    errorDiv.textContent = 'Please enter your password to confirm.';
                    errorDiv.style.display = 'block';
                    return;
                }
                // Simulate deletion (replace with real backend logic)
                confirmBtn.disabled = true;
                confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Deleting...';
                setTimeout(() => {
                    document.getElementById('deleteAccountModal').classList.remove('active');
                    confirmBtn.disabled = false;
                    confirmBtn.innerHTML = '<i class="fas fa-user-slash"></i> Delete Account';
                    if (typeof showToast === 'function') showToast('Account deleted successfully', 'success');
                    // Optionally redirect or log out user here
                }, 1800);
            });
        }
    });
    </script>

    <!-- High School Curriculum Modal (Modern & Advanced) -->
    <div class="modal-overlay" id="curriculumModal">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <div class="modal-title">High School Curriculum</div>
                <button class="modal-close" id="curriculumModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="tabs">
                    <div class="tab active" data-subject="math">Mathematics</div>
                    <div class="tab" data-subject="science">Science</div>
                    <div class="tab" data-subject="english">English</div>
                    <div class="tab" data-subject="history">History</div>
                    <div class="tab" data-subject="foreign">Foreign Language</div>
                </div>
                
                <div id="mathCurriculum" class="subject-content">
                    <div class="subject-grid">
                        <div class="subject-card">
                            <div class="subject-header">
                                <div class="subject-icon">
                                    <i class="fas fa-square-root-alt"></i>
                                </div>
                                <div>
                                    <div class="subject-title">Algebra I</div>
                                    <div class="subject-description">Foundational algebraic concepts and problem-solving</div>
                                </div>
                            </div>
                            <div class="topic-list">
                                <div class="topic-item">
                                    <div class="topic-name">Linear Equations</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Quadratic Functions</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Polynomials</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                        </div>
                        
                        <div class="subject-card">
                            <div class="subject-header">
                                <div class="subject-icon">
                                    <i class="fas fa-shapes"></i>
                                </div>
                                <div>
                                    <div class="subject-title">Geometry</div>
                                    <div class="subject-description">Study of shapes, sizes, and properties of space</div>
                                </div>
                            </div>
                            <div class="topic-list">
                                <div class="topic-item">
                                    <div class="topic-name">Triangles and Congruence</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Circles</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Trigonometry Basics</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                        </div>
                        
                        <div class="subject-card">
                            <div class="subject-header">
                                <div class="subject-icon">
                                    <i class="fas fa-function"></i>
                                </div>
                                <div>
                                    <div class="subject-title">Algebra II</div>
                                    <div class="subject-description">Advanced algebraic concepts and functions</div>
                                </div>
                            </div>
                            <div class="topic-list">
                                <div class="topic-item">
                                    <div class="topic-name">Exponential Functions</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Logarithms</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Complex Numbers</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                        </div>
                        
                        <div class="subject-card">
                            <div class="subject-header">
                                <div class="subject-icon">
                                    <i class="fas fa-calculator"></i>
                                </div>
                                <div>
                                    <div class="subject-title">Calculus</div>
                                    <div class="subject-description">Introduction to limits, derivatives, and integrals</div>
                                </div>
                            </div>
                            <div class="topic-list">
                                <div class="topic-item">
                                    <div class="topic-name">Limits and Continuity</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Derivatives</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Integration</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                        </div>
                    </div>
                    
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-title">Practice Quiz: Algebra I</div>
                            <div class="quiz-timer">15:00</div>
                        </div>
                        <div class="quiz-question">What is the solution to the equation: 2x + 5 = 15?</div>
                        <div class="quiz-options">
                            <div class="quiz-option">
                                <div class="quiz-option-radio"></div>
                                x = 5
                            </div>
                            <div class="quiz-option">
                                <div class="quiz-option-radio"></div>
                                x = 10
                            </div>
                            <div class="quiz-option">
                                <div class="quiz-option-radio"></div>
                                x = 7.5
                            </div>
                            <div class="quiz-option">
                                <div class="quiz-option-radio"></div>
                                x = 20
                            </div>
                        </div>
                        <div class="quiz-feedback" id="quizFeedback">
                            The correct answer is x = 5. To solve this equation, subtract 5 from both sides to get 2x = 10, then divide both sides by 2 to get x = 5.
                        </div>
                        <div class="quiz-navigation">
                            <button class="quick-action-btn">Previous</button>
                            <button class="quick-action-btn primary" id="checkAnswerBtn">Check Answer</button>
                            <button class="quick-action-btn">Next</button>
                        </div>
                        <div class="quiz-progress">Question 1 of 10</div>
                    </div>
                </div>
                
                <div id="scienceCurriculum" class="subject-content" style="display: none;">
                    <div class="subject-grid">
                        <div class="subject-card">
                            <div class="subject-header">
                                <div class="subject-icon">
                                    <i class="fas fa-atom"></i>
                                </div>
                                <div>
                                    <div class="subject-title">Physics</div>
                                    <div class="subject-description">Fundamental principles of matter and energy</div>
                                </div>
                            </div>
                            <div class="topic-list">
                                <div class="topic-item">
                                    <div class="topic-name">Newton's Laws</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Electricity and Magnetism</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                                <div class="topic-item">
                                    <div class="topic-name">Thermodynamics</div>
                                    <div class="topic-actions">
                                        <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                        <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                        </div>
                        
                        <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-flask"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Chemistry</div>
                                  <div class="subject-description">Study of matter and its interactions</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Atomic Structure</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Chemical Bonding</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Stoichiometry</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-dna"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Biology</div>
                                  <div class="subject-description">Study of living organisms and life processes</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Cell Biology</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Genetics</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Evolution</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-globe-americas"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Earth Science</div>
                                  <div class="subject-description">Study of Earth's systems and processes</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Geology</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Meteorology</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Astronomy</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                  </div>
                  
                  <div class="quiz-container">
                      <div class="quiz-header">
                          <div class="quiz-title">Practice Quiz: Biology</div>
                          <div class="quiz-timer">20:00</div>
                      </div>
                      <div class="quiz-question">Which organelle is responsible for protein synthesis in cells?</div>
                      <div class="quiz-options">
                          <div class="quiz-option">
                              <div class="quiz-option-radio"></div>
                              Mitochondria
                          </div>
                          <div class="quiz-option">
                              <div class="quiz-option-radio"></div>
                              Ribosome
                          </div>
                          <div class="quiz-option">
                              <div class="quiz-option-radio"></div>
                              Nucleus
                          </div>
                          <div class="quiz-option">
                              <div class="quiz-option-radio"></div>
                              Golgi Apparatus
                          </div>
                      </div>
                      <div class="quiz-feedback" id="scienceQuizFeedback">
                          The correct answer is Ribosome. Ribosomes are the cellular structures responsible for protein synthesis, where they translate messenger RNA into polypeptide chains.
                      </div>
                      <div class="quiz-navigation">
                          <button class="quick-action-btn">Previous</button>
                          <button class="quick-action-btn primary" id="checkScienceAnswerBtn">Check Answer</button>
                          <button class="quick-action-btn">Next</button>
                      </div>
                      <div class="quiz-progress">Question 1 of 12</div>
                  </div>
              </div>
              
              <div id="englishCurriculum" class="subject-content" style="display: none;">
                  <div class="subject-grid">
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-book-open"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Literature</div>
                                  <div class="subject-description">Study of literary works and analysis</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Shakespeare</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">American Literature</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Poetry Analysis</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-pen-fancy"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Composition</div>
                                  <div class="subject-description">Developing writing skills and techniques</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Essay Writing</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Research Papers</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Creative Writing</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-language"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Grammar</div>
                                  <div class="subject-description">Rules and structure of the English language</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Parts of Speech</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Sentence Structure</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Punctuation</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-theater-masks"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Drama</div>
                                  <div class="subject-description">Study of dramatic literature and performance</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Greek Tragedy</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Modern Theater</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Play Analysis</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                  </div>
                  
                  <div class="assignment-card">
                      <div class="assignment-header">
                          <div class="assignment-title">Essay Assignment</div>
                          <div class="assignment-due">Due: May 15, 2023</div>
                      </div>
                      <div class="assignment-description">
                          <p>Write a 5-paragraph essay analyzing the theme of "coming of age" in the novel "To Kill a Mockingbird" by Harper Lee. Your essay should include:</p>
                          <ul>
                              <li>A clear thesis statement</li>
                              <li>Three supporting arguments with textual evidence</li>
                              <li>Proper MLA formatting</li>
                              <li>A conclusion that summarizes your main points</li>
                          </ul>
                      </div>
                      <div class="assignment-submission">
                          <textarea class="assignment-textarea" placeholder="Type your essay here..."></textarea>
                          <div class="assignment-actions">
                              <button class="quick-action-btn">Save Draft</button>
                              <button class="quick-action-btn primary">Submit</button>
                          </div>
                      </div>
                  </div>
              </div>
              
              <div id="historyCurriculum" class="subject-content" style="display: none;">
                  <div class="subject-grid">
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-landmark"></i>
                              </div>
                              <div>
                                  <div class="subject-title">World History</div>
                                  <div class="subject-description">Survey of global historical developments</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Ancient Civilizations</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Middle Ages</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Renaissance</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-flag-usa"></i>
                              </div>
                              <div>
                                  <div class="subject-title">U.S. History</div>
                                  <div class="subject-description">Development of the United States</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">American Revolution</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Civil War</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Civil Rights Movement</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-gavel"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Government</div>
                                  <div class="subject-description">Political systems and civic engagement</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Constitution</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Branches of Government</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Political Parties</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-globe-europe"></i>
                              </div>
                              <div>
                                  <div class="subject-title">European History</div>
                                  <div class="subject-description">Key events in European development</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Industrial Revolution</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">World Wars</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Cold War</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                  </div>
                  
                  <div class="live-class-container">
                      <div class="live-class-header">
                          <div class="live-class-title">Upcoming Live Class: World War II</div>
                          <div class="live-class-status active">Starts in 15 min</div>
                      </div>
                      <div class="live-class-info">
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Teacher</div>
                              <div class="live-class-info-value">Mr. Johnson</div>
                          </div>
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Date & Time</div>
                              <div class="live-class-info-value">May 10, 2023 - 2:00 PM</div>
                          </div>
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Duration</div>
                              <div class="live-class-info-value">45 minutes</div>
                          </div>
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Participants</div>
                              <div class="live-class-info-value">24 students</div>
                          </div>
                      </div>
                      <div class="live-class-actions">
                          <button class="quick-action-btn"><i class="fas fa-calendar-plus"></i> Add to Calendar</button>
                          <button class="quick-action-btn primary"><i class="fas fa-video"></i> Join Class</button>
                      </div>
                  </div>
              </div>
              
              <div id="foreignCurriculum" class="subject-content" style="display: none;">
                  <div class="subject-grid">
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-language"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Spanish</div>
                                  <div class="subject-description">Introductory Spanish language and culture</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Basic Vocabulary</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Grammar</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Conversation</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-language"></i>
                              </div>
                              <div>
                                  <div class="subject-title">French</div>
                                  <div class="subject-description">Introductory French language and culture</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Basic Vocabulary</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Grammar</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Conversation</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-language"></i>
                              </div>
                              <div>
                                  <div class="subject-title">German</div>
                                  <div class="subject-description">Introductory German language and culture</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Basic Vocabulary</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Grammar</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Conversation</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                      
                      <div class="subject-card">
                          <div class="subject-header">
                              <div class="subject-icon">
                                  <i class="fas fa-language"></i>
                              </div>
                              <div>
                                  <div class="subject-title">Mandarin</div>
                                  <div class="subject-description">Introductory Chinese language and culture</div>
                              </div>
                          </div>
                          <div class="topic-list">
                              <div class="topic-item">
                                  <div class="topic-name">Basic Vocabulary</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Characters</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                              <div class="topic-item">
                                  <div class="topic-name">Conversation</div>
                                  <div class="topic-actions">
                                      <button class="topic-btn primary"><i class="fas fa-book"></i></button>
                                      <button class="topic-btn secondary"><i class="fas fa-question-circle"></i></button>
                                  </div>
                              </div>
                          </div>
                          <button class="quick-action-btn primary" style="width: 100%; margin-top: 0.5rem;">Start Learning</button>
                      </div>
                  </div>
                  
                  <div class="group-session-card">
                      <div class="group-session-header">
                          <div class="group-session-title">Spanish Conversation Group</div>
                          <div class="group-session-status active">Active</div>
                      </div>
                      <div class="live-class-info">
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Next Session</div>
                              <div class="live-class-info-value">May 12, 2023 - 4:00 PM</div>
                          </div>
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Level</div>
                              <div class="live-class-info-value">Beginner</div>
                          </div>
                          <div class="live-class-info-item">
                              <div class="live-class-info-label">Facilitator</div>
                              <div class="live-class-info-value">Maria Gonzalez</div>
                          </div>
                      </div>
                      <div class="group-session-members">
                          <div class="group-member">
                              <div class="group-member-avatar">JD</div>
                              <span>You</span>
                          </div>
                          <div class="group-member">
                              <div class="group-member-avatar">SG</div>
                              <span>Sarah</span>
                          </div>
                          <div class="group-member">
                              <div class="group-member-avatar">MK</div>
                              <span>Michael</span>
                          </div>
                          <div class="group-member">
                              <div class="group-member-avatar">+5</div>
                          </div>
                      </div>
                      <div class="group-session-actions">
                          <button class="quick-action-btn"><i class="fas fa-info-circle"></i> Details</button>
                          <button class="quick-action-btn primary"><i class="fas fa-comments"></i> Join Chat</button>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>

<!-- Live Classes Modal (Advanced & Modern) -->
<!-- Live Classes Modal (Modern & Advanced) -->
<div class="modal-overlay" id="liveClassModal">
    <div class="modal" style="max-width: 1000px;">
        <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
            <div class="modal-title" style="display:flex;align-items:center;gap:0.75rem;">
                <i class="fas fa-video" style="color:var(--primary-color);font-size:1.5rem;"></i>
                <span style="font-size:1.25rem;font-weight:700;">Live Classes</span>
                <span class="badge accent" style="margin-left:0.5rem;">Beta</span>
            </div>
            <button class="modal-close" id="liveClassModalClose" aria-label="Close live classes">&times;</button>
        </div>
        <div class="modal-body" style="padding:0;">
            <!-- Modern Tabs with icons and animated underline -->
            <div class="tabs" style="position:sticky;top:60px;background:var(--bg-color);z-index:1;">
                <div class="tab active" data-class-type="upcoming"><i class="fas fa-calendar-alt"></i> <span>Upcoming</span></div>
                <div class="tab" data-class-type="recorded"><i class="fas fa-play-circle"></i> <span>Recorded</span></div>
                <div class="tab" data-class-type="my-schedule"><i class="fas fa-user-clock"></i> <span>My Schedule</span></div>
            </div>

            <!-- Upcoming Classes -->
            <div id="upcomingClasses" class="class-content" style="padding:2rem;">
                <div style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-bottom:1.5rem;">
                    <input type="text" class="quick-action-btn" style="flex:2;min-width:220px;" placeholder="Search classes, teachers, or topics...">
                    <select class="quick-action-btn" style="min-width:150px;">
                        <option>All Subjects</option>
                        <option>Mathematics</option>
                        <option>Science</option>
                        <option>English</option>
                        <option>History</option>
                        <option>Foreign Language</option>
                    </select>
                    <select class="quick-action-btn" style="min-width:120px;">
                        <option>Any Level</option>
                        <option>Beginner</option>
                        <option>Intermediate</option>
                        <option>Advanced</option>
                    </select>
                    <button class="quick-action-btn"><i class="fas fa-filter"></i> Filters</button>
                </div>
                <div class="dashboard-grid">
                    <!-- Modern Class Card 1 -->
                    <div class="live-class-container" style="position:relative;box-shadow:0 4px 24px rgba(108,92,231,0.08);border:1.5px solid var(--primary-color);">
                        <span class="badge primary" style="position:absolute;top:1rem;right:1rem;">Live</span>
                        <div class="live-class-header" style="gap:1rem;">
                            <div class="live-class-title" style="font-size:1.1rem;font-weight:700;">Algebra II: Quadratic Equations</div>
                            <div class="live-class-status active" style="display:flex;align-items:center;gap:0.5rem;">
                                <span class="pulse-dot" style="width:10px;height:10px;background:var(--success-color);border-radius:50%;display:inline-block;animation:pulse 1.2s infinite;"></span>
                                Today - 2:00 PM
                            </div>
                        </div>
                        <div class="live-class-info">
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Teacher</div>
                                <div class="live-class-info-value" style="display:flex;align-items:center;gap:0.5rem;">
                                    <img src="https://ui-avatars.com/api/?name=Mr+Thompson&background=00b894&color=fff&rounded=true&size=32" style="width:32px;height:32px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.08);"> 
                                    <span style="font-weight:500;">Mr. Thompson</span>
                                    <span class="badge secondary" style="margin-left:0.5rem;">Math</span>
                                </div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Duration</div>
                                <div class="live-class-info-value">45 min</div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Participants</div>
                                <div class="live-class-info-value">
                                    <span class="badge accent"><i class="fas fa-user-friends"></i> 18/25</span>
                                </div>
                            </div>
                        </div>
                        <div class="live-class-actions" style="margin-top:1rem;">
                            <button class="quick-action-btn" title="Add to Calendar"><i class="fas fa-calendar-plus"></i></button>
                            <button class="quick-action-btn primary" title="Join Class"><i class="fas fa-video"></i> Join</button>
                            <button class="quick-action-btn" title="Remind Me"><i class="fas fa-bell"></i></button>
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div style="margin-top:1rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
                            <span class="badge">Grade 11</span>
                            <span class="badge">Intermediate</span>
                        </div>
                    </div>
                    <!-- Modern Class Card 2 -->
                    <div class="live-class-container" style="position:relative;box-shadow:0 4px 24px rgba(253,203,110,0.08);border:1.5px solid var(--accent-color);">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Soon</span>
                        <div class="live-class-header" style="gap:1rem;">
                            <div class="live-class-title" style="font-size:1.1rem;font-weight:700;">Chemistry: Stoichiometry</div>
                            <div class="live-class-status" style="display:flex;align-items:center;gap:0.5rem;">
                                <i class="fas fa-clock" style="color:var(--warning-color);font-size:1rem;"></i>
                                Tomorrow - 10:00 AM
                            </div>
                        </div>
                        <div class="live-class-info">
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Teacher</div>
                                <div class="live-class-info-value" style="display:flex;align-items:center;gap:0.5rem;">
                                    <img src="https://ui-avatars.com/api/?name=Mrs+Rodriguez&background=fdcb6e&color=222f3e&rounded=true&size=32" style="width:32px;height:32px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.08);"> 
                                    <span style="font-weight:500;">Mrs. Rodriguez</span>
                                    <span class="badge secondary" style="margin-left:0.5rem;">Science</span>
                                </div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Duration</div>
                                <div class="live-class-info-value">1 hour</div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Participants</div>
                                <div class="live-class-info-value">
                                    <span class="badge"><i class="fas fa-user-friends"></i> 12/25</span>
                                </div>
                            </div>
                        </div>
                        <div class="live-class-actions" style="margin-top:1rem;">
                            <button class="quick-action-btn" title="Add to Calendar"><i class="fas fa-calendar-plus"></i></button>
                            <button class="quick-action-btn" title="Remind Me"><i class="fas fa-bell"></i></button>
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div style="margin-top:1rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
                            <span class="badge">Grade 10</span>
                            <span class="badge">Beginner</span>
                        </div>
                    </div>
                    <!-- Modern Class Card 3 -->
                    <div class="live-class-container" style="position:relative;box-shadow:0 4px 24px rgba(9,132,227,0.08);border:1.5px solid var(--info-color);">
                        <span class="badge secondary" style="position:absolute;top:1rem;right:1rem;">Upcoming</span>
                        <div class="live-class-header" style="gap:1rem;">
                            <div class="live-class-title" style="font-size:1.1rem;font-weight:700;">History: World War II</div>
                            <div class="live-class-status" style="display:flex;align-items:center;gap:0.5rem;">
                                <i class="fas fa-calendar-day" style="color:var(--info-color);font-size:1rem;"></i>
                                May 15 - 3:30 PM
                            </div>
                        </div>
                        <div class="live-class-info">
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Teacher</div>
                                <div class="live-class-info-value" style="display:flex;align-items:center;gap:0.5rem;">
                                    <img src="https://ui-avatars.com/api/?name=Mr+Johnson&background=0984e3&color=fff&rounded=true&size=32" style="width:32px;height:32px;border-radius:50%;box-shadow:0 2px 8px rgba(0,0,0,0.08);"> 
                                    <span style="font-weight:500;">Mr. Johnson</span>
                                    <span class="badge accent" style="margin-left:0.5rem;">History</span>
                                </div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Duration</div>
                                <div class="live-class-info-value">50 min</div>
                            </div>
                            <div class="live-class-info-item">
                                <div class="live-class-info-label">Participants</div>
                                <div class="live-class-info-value">
                                    <span class="badge"><i class="fas fa-user-friends"></i> 8/25</span>
                                </div>
                            </div>
                        </div>
                        <div class="live-class-actions" style="margin-top:1rem;">
                            <button class="quick-action-btn" title="Add to Calendar"><i class="fas fa-calendar-plus"></i></button>
                            <button class="quick-action-btn" title="Remind Me"><i class="fas fa-bell"></i></button>
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                        </div>
                        <div style="margin-top:1rem;display:flex;gap:0.5rem;flex-wrap:wrap;">
                            <span class="badge">Grade 12</span>
                            <span class="badge">Advanced</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recorded Classes -->
            <div id="recordedClasses" class="class-content" style="display:none;padding:2rem;">
                <div style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-bottom:1.5rem;">
                    <input type="text" class="quick-action-btn" style="flex:2;min-width:220px;" placeholder="Search recorded classes, topics, or teachers...">
                    <select class="quick-action-btn" style="min-width:150px;">
                        <option>All Subjects</option>
                        <option>Mathematics</option>
                        <option>Science</option>
                        <option>English</option>
                        <option>History</option>
                        <option>Foreign Language</option>
                    </select>
                    <select class="quick-action-btn" style="min-width:120px;">
                        <option>Any Level</option>
                        <option>Beginner</option>
                        <option>Intermediate</option>
                        <option>Advanced</option>
                    </select>
                    <button class="quick-action-btn"><i class="fas fa-filter"></i> Filters</button>
                </div>
                <div class="dashboard-grid">
                    <!-- Modern Recorded Class Card 1 -->
                    <div class="subject-card" style="position:relative;overflow:hidden;box-shadow:0 4px 24px rgba(0,184,148,0.08);border:1.5px solid var(--secondary-color);">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Recorded</span>
                        <div class="subject-header">
                            <div class="subject-icon" style="background:linear-gradient(135deg,#00b894 60%,#6c5ce7 100%);">
                                <i class="fas fa-atom"></i>
                            </div>
                            <div>
                                <div class="subject-title">Physics: Newton's Laws</div>
                                <div class="subject-description">Recorded on April 28, 2023 &bull; <span style="color:var(--text-light);font-size:0.9em;">45 min</span></div>
                            </div>
                        </div>
                        <div class="video-container" style="border-radius:var(--radius-lg);overflow:hidden;box-shadow:0 4px 16px rgba(0,0,0,0.08);">
                            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen title="Physics: Newton's Laws"></iframe>
                        </div>
                        <div style="display:flex;align-items:center;gap:0.75rem;margin-top:1rem;">
                            <img src="https://ui-avatars.com/api/?name=Dr+Smith&background=00b894&color=fff&rounded=true&size=32" style="width:32px;height:32px;border-radius:50%;">
                            <span style="font-weight:500;">Dr. Smith</span>
                            <span class="badge secondary" style="margin-left:auto;"><i class="fas fa-user-friends"></i> 120 views</span>
                        </div>
                        <div class="quick-actions" style="margin-top: 1rem;flex-wrap:wrap;">
                            <button class="quick-action-btn" title="Bookmark"><i class="fas fa-bookmark"></i></button>
                            <button class="quick-action-btn" title="Download"><i class="fas fa-download"></i></button>
                            <button class="quick-action-btn" title="Share"><i class="fas fa-share"></i></button>
                            <button class="quick-action-btn" title="Add Note"><i class="fas fa-sticky-note"></i></button>
                            <button class="quick-action-btn" title="Transcript"><i class="fas fa-file-alt"></i></button>
                        </div>
                        <div style="margin-top:1rem;">
                            <div style="font-size:0.95em;color:var(--text-light);margin-bottom:0.5rem;">
                                <i class="fas fa-tags"></i> <span class="badge">Physics</span> <span class="badge">Grade 11</span> <span class="badge">Intermediate</span>
                            </div>
                            <div style="font-size:0.9em;color:var(--text-light);">
                                <i class="fas fa-info-circle"></i> Covers: Laws of motion, real-world examples, problem-solving.
                            </div>
                        </div>
                    </div>
                    <!-- Modern Recorded Class Card 2 -->
                    <div class="subject-card" style="position:relative;overflow:hidden;box-shadow:0 4px 24px rgba(253,203,110,0.08);border:1.5px solid var(--accent-color);">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Recorded</span>
                        <div class="subject-header">
                            <div class="subject-icon" style="background:linear-gradient(135deg,#fdcb6e 60%,#6c5ce7 100%);">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div>
                                <div class="subject-title">Literature: Shakespeare Analysis</div>
                                <div class="subject-description">Recorded on April 21, 2023 &bull; <span style="color:var(--text-light);font-size:0.9em;">35 min</span></div>
                            </div>
                        </div>
                        <div class="video-container" style="border-radius:var(--radius-lg);overflow:hidden;box-shadow:0 4px 16px rgba(0,0,0,0.08);">
                            <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen title="Literature: Shakespeare Analysis"></iframe>
                        </div>
                        <div style="display:flex;align-items:center;gap:0.75rem;margin-top:1rem;">
                            <img src="https://ui-avatars.com/api/?name=Ms+Taylor&background=fdcb6e&color=222f3e&rounded=true&size=32" style="width:32px;height:32px;border-radius:50%;">
                            <span style="font-weight:500;">Ms. Taylor</span>
                            <span class="badge secondary" style="margin-left:auto;"><i class="fas fa-user-friends"></i> 98 views</span>
                        </div>
                        <div class="quick-actions" style="margin-top: 1rem;flex-wrap:wrap;">
                            <button class="quick-action-btn" title="Bookmark"><i class="fas fa-bookmark"></i></button>
                            <button class="quick-action-btn" title="Download"><i class="fas fa-download"></i></button>
                            <button class="quick-action-btn" title="Share"><i class="fas fa-share"></i></button>
                            <button class="quick-action-btn" title="Add Note"><i class="fas fa-sticky-note"></i></button>
                            <button class="quick-action-btn" title="Transcript"><i class="fas fa-file-alt"></i></button>
                        </div>
                        <div style="margin-top:1rem;">
                            <div style="font-size:0.95em;color:var(--text-light);margin-bottom:0.5rem;">
                                <i class="fas fa-tags"></i> <span class="badge">English</span> <span class="badge">Grade 10</span> <span class="badge">Advanced</span>
                            </div>
                            <div style="font-size:0.9em;color:var(--text-light);">
                                <i class="fas fa-info-circle"></i> Focus: Hamlet, Macbeth, literary devices, essay tips.
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Empty state -->
                <div id="noRecordedClasses" style="display:none;text-align:center;padding:2rem;color:var(--text-light);">
                    <i class="fas fa-video-slash" style="font-size:2.5rem;margin-bottom:1rem;opacity:0.5;"></i>
                    <div>No recorded classes found.</div>
                </div>
            </div>

            <!-- My Schedule -->
            <div id="mySchedule" class="class-content" style="display:none;padding:2rem;">
                <div class="calendar" style="margin-bottom:2rem;">
                    <div class="calendar-header">
                        <div class="calendar-title">My Google Calendar</div>
                    </div>
                    <div style="width:100%;max-width:900px;margin:auto;">
                            <button class="calendar-nav-btn"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="calendar-grid">
                        <div class="calendar-day-header">Sun</div>
                        <div class="calendar-day-header">Mon</div>
                        <div class="calendar-day-header">Tue</div>
                        <div class="calendar-day-header">Wed</div>
                        <div class="calendar-day-header">Thu</div>
                        <div class="calendar-day-header">Fri</div>
                        <div class="calendar-day-header">Sat</div>
                        <div class="calendar-day other-month">30</div>
                        <div class="calendar-day">1</div>
                        <div class="calendar-day">2</div>
                        <div class="calendar-day">3</div>
                        <div class="calendar-day">4</div>
                        <div class="calendar-day">5</div>
                        <div class="calendar-day">6</div>
                        <div class="calendar-day">7</div>
                        <div class="calendar-day">8</div>
                        <div class="calendar-day">9</div>
                        <div class="calendar-day today">10</div>
                        <div class="calendar-day">11</div>
                        <div class="calendar-day">12</div>
                        <div class="calendar-day">13</div>
                        <div class="calendar-day">14</div>
                        <div class="calendar-day selected">15</div>
                        <div class="calendar-day">16</div>
                        <div class="calendar-day">17</div>
                        <div class="calendar-day">18</div>
                        <div class="calendar-day">19</div>
                        <div class="calendar-day">20</div>
                        <div class="calendar-day">21</div>
                        <div class="calendar-day">22</div>
                        <div class="calendar-day">23</div>
                        <div class="calendar-day">24</div>
                        <div class="calendar-day">25</div>
                        <div class="calendar-day">26</div>
                        <div class="calendar-day">27</div>
                        <div class="calendar-day">28</div>
                        <div class="calendar-day">29</div>
                        <div class="calendar-day">30</div>
                        <div class="calendar-day">31</div>
                        <div class="calendar-day other-month">1</div>
                    </div>
                </div>
                <div class="live-class-container" style="box-shadow:0 4px 24px rgba(108,92,231,0.08);">
                    <div class="live-class-header">
                        <div class="live-class-title">Your Scheduled Classes</div>
                    </div>
                    <div class="attendance-list">
                        <div class="attendance-item">
                            <div class="attendance-name">Algebra II: Quadratic Equations</div>
                            <div class="attendance-status present"><i class="fas fa-check-circle"></i> Today 2:00 PM</div>
                        </div>
                        <div class="attendance-item">
                            <div class="attendance-name">Chemistry: Stoichiometry</div>
                            <div class="attendance-status"><i class="fas fa-clock"></i> Tomorrow 10:00 AM</div>
                        </div>
                        <div class="attendance-item">
                            <div class="attendance-name">History: World War II</div>
                            <div class="attendance-status"><i class="fas fa-calendar-day"></i> May 15 3:30 PM</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
/* Modern pulse animation for live indicator */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(0,184,148,0.5);}
    70% { box-shadow: 0 0 0 10px rgba(0,184,148,0);}
    100% { box-shadow: 0 0 0 0 rgba(0,184,148,0);}
}
</style>

<!-- Group Sessions Modal -->
<!-- Group Sessions Modal (Advanced & Modern) -->
<div class="modal-overlay" id="groupSessionModal">
    <div class="modal" style="max-width: 1000px;">
        <div class="modal-header" style="position:sticky;top:0;background:var(--bg-color);z-index:2;">
            <div class="modal-title" style="display:flex;align-items:center;gap:0.5rem;">
                <i class="fas fa-users" style="color:var(--primary-color);"></i>
                <span style="font-size:1.25rem;font-weight:700;">Group Study Sessions</span>
                <span class="badge accent" style="margin-left:0.5rem;">Beta</span>
            </div>
            <button class="modal-close" id="groupSessionModalClose" aria-label="Close group sessions">&times;</button>
        </div>
        <div class="modal-body" style="padding:0;">
            <!-- Modern Tabs with icons and animated underline -->
            <div class="tabs" style="position:sticky;top:60px;background:var(--bg-color);z-index:1;">
                <div class="tab active" data-group-type="explore"><i class="fas fa-compass"></i> <span>Explore</span></div>
                <div class="tab" data-group-type="active"><i class="fas fa-bolt"></i> <span>Active</span></div>
                <div class="tab" data-group-type="my-groups"><i class="fas fa-user-friends"></i> <span>My Groups</span></div>
                <div class="tab" data-group-type="create"><i class="fas fa-plus-circle"></i> <span>Create</span></div>
            </div>

            <!-- Explore Groups (modern search/filter UI) -->
            <div id="exploreGroups" class="group-content" style="padding:2rem;">
                <div style="display:flex;gap:1rem;align-items:center;flex-wrap:wrap;margin-bottom:1.5rem;">
                    <div style="position:relative;flex:2;min-width:220px;">
                        <input type="text" class="quick-action-btn" style="width:100%;padding-left:2.2rem;" placeholder="Search groups, topics, or facilitators...">
                        <span style="position:absolute;left:0.7rem;top:50%;transform:translateY(-50%);color:var(--text-light);"><i class="fas fa-search"></i></span>
                    </div>
                    <select class="quick-action-btn" style="min-width:150px;">
                        <option>All Subjects</option>
                        <option>Mathematics</option>
                        <option>Science</option>
                        <option>English</option>
                        <option>History</option>
                        <option>Foreign Language</option>
                    </select>
                    <select class="quick-action-btn" style="min-width:120px;">
                        <option>Any Level</option>
                        <option>Beginner</option>
                        <option>Intermediate</option>
                        <option>Advanced</option>
                    </select>
                    <button class="quick-action-btn" title="More Filters"><i class="fas fa-sliders-h"></i></button>
                </div>
                <div class="dashboard-grid">
                    <!-- Modern Group Card 1 -->
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(108,92,231,0.08);border:1.5px solid var(--primary-color);overflow:hidden;">
                        <span class="badge primary" style="position:absolute;top:1rem;right:1rem;">Open</span>
                        <div class="group-session-header" style="gap:1rem;">
                            <div class="group-session-title" style="font-size:1.1rem;font-weight:700;">AP Calculus AB</div>
                            <div class="group-session-status active" style="display:flex;align-items:center;gap:0.5rem;">
                                <span class="pulse-dot" style="width:10px;height:10px;background:var(--success-color);border-radius:50%;display:inline-block;animation:pulse 1.2s infinite;"></span>
                                12 members
                            </div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Weekly problem-solving and exam prep for AP Calculus AB.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--primary-color);">AC</div><span>Alex</span></div>
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--secondary-color);">+10</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: Fri, 7:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn primary" title="Join"><i class="fas fa-sign-in-alt"></i> Join</button>
                        </div>
                    </div>
                    <!-- Modern Group Card 2 -->
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(253,203,110,0.08);border:1.5px solid var(--accent-color);overflow:hidden;">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Private</span>
                        <div class="group-session-header" style="gap:1rem;">
                            <div class="group-session-title" style="font-size:1.1rem;font-weight:700;">French Conversation</div>
                            <div class="group-session-status" style="display:flex;align-items:center;gap:0.5rem;">8 members</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Practice French speaking skills in a friendly group.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--accent-color);color:var(--text-color);">MG</div><span>Marie</span></div>
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--primary-color);">+6</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: Sat, 3:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn" title="Request Invite"><i class="fas fa-envelope"></i> Request Invite</button>
                        </div>
                    </div>
                    <!-- Modern Group Card 3 -->
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(85,239,196,0.08);border:1.5px solid var(--secondary-color);overflow:hidden;">
                        <span class="badge secondary" style="position:absolute;top:1rem;right:1rem;">New</span>
                        <div class="group-session-header" style="gap:1rem;">
                            <div class="group-session-title" style="font-size:1.1rem;font-weight:700;">Biology Olympiad Prep</div>
                            <div class="group-session-status active" style="display:flex;align-items:center;gap:0.5rem;">5 members</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Challenge yourself with advanced biology topics and quizzes.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--secondary-color);">EW</div><span>Emma</span></div>
                            <div class="group-member"><div class="group-member-avatar" style="background:var(--primary-color);">+3</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: Sun, 5:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn primary" title="Join"><i class="fas fa-sign-in-alt"></i> Join</button>
                        </div>
                    </div>
                </div>
                <!-- Empty state -->
                <div id="noGroupsFound" style="display:none;text-align:center;padding:2rem;color:var(--text-light);">
                    <i class="fas fa-users-slash" style="font-size:2.5rem;margin-bottom:1rem;opacity:0.5;"></i>
                    <div>No groups found. Try adjusting your filters.</div>
                </div>
            </div>

            <!-- Active Groups -->
            <div id="activeGroups" class="group-content" style="display:none;padding:2rem;">
                <div class="dashboard-grid">
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(0,184,148,0.08);border:1.5px solid var(--success-color);overflow:hidden;">
                        <span class="badge primary" style="position:absolute;top:1rem;right:1rem;">Active</span>
                        <div class="group-session-header">
                            <div class="group-session-title">Spanish Conversation Group</div>
                            <div class="group-session-status active">5 members</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Casual Spanish speaking practice for all levels.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar">MG</div><span>Maria</span></div>
                            <div class="group-member"><div class="group-member-avatar">SG</div><span>Sarah</span></div>
                            <div class="group-member"><div class="group-member-avatar">MK</div><span>Michael</span></div>
                            <div class="group-member"><div class="group-member-avatar">+2</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: May 12, 4:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn primary" title="Join Chat"><i class="fas fa-comments"></i> Join Chat</button>
                        </div>
                    </div>
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(253,203,110,0.08);border:1.5px solid var(--accent-color);overflow:hidden;">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Active</span>
                        <div class="group-session-header">
                            <div class="group-session-title">Calculus Study Group</div>
                            <div class="group-session-status active">8 members</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Integration techniques and exam review.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar">AC</div><span>Alex</span></div>
                            <div class="group-member"><div class="group-member-avatar">TJ</div><span>Taylor</span></div>
                            <div class="group-member"><div class="group-member-avatar">+6</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: May 11, 6:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn primary" title="Join Chat"><i class="fas fa-comments"></i> Join Chat</button>
                        </div>
                    </div>
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(9,132,227,0.08);border:1.5px solid var(--info-color);overflow:hidden;">
                        <span class="badge secondary" style="position:absolute;top:1rem;right:1rem;">Soon</span>
                        <div class="group-session-header">
                            <div class="group-session-title">Literature Discussion</div>
                            <div class="group-session-status">3 members</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Discussing "To Kill a Mockingbird" and more.</div>
                        <div class="group-session-members" style="margin-bottom:0.5rem;">
                            <div class="group-member"><div class="group-member-avatar">EW</div><span>Emma</span></div>
                            <div class="group-member"><div class="group-member-avatar">+2</div></div>
                        </div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: May 14, 7:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn" title="Set Reminder"><i class="fas fa-bell"></i> Set Reminder</button>
                        </div>
                    </div>
                </div>
                <div id="noActiveGroups" style="display:none;text-align:center;padding:2rem;color:var(--text-light);">
                    <i class="fas fa-users-slash" style="font-size:2.5rem;margin-bottom:1rem;opacity:0.5;"></i>
                    <div>No active groups at the moment.</div>
                </div>
            </div>

            <!-- My Groups -->
            <div id="myGroups" class="group-content" style="display:none;padding:2rem;">
                <div class="dashboard-grid">
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(0,184,148,0.08);border:1.5px solid var(--success-color);overflow:hidden;">
                        <span class="badge primary" style="position:absolute;top:1rem;right:1rem;">Member</span>
                        <div class="group-session-header">
                            <div class="group-session-title">Spanish Conversation Group</div>
                            <div class="group-session-status active">You are a member</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">Casual Spanish speaking practice for all levels.</div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: May 12, 4:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Details"><i class="fas fa-info-circle"></i></button>
                            <button class="quick-action-btn danger" title="Leave Group"><i class="fas fa-sign-out-alt"></i> Leave Group</button>
                        </div>
                    </div>
                    <div class="group-session-card" style="position:relative;box-shadow:0 4px 24px rgba(253,203,110,0.08);border:1.5px solid var(--accent-color);overflow:hidden;">
                        <span class="badge accent" style="position:absolute;top:1rem;right:1rem;">Facilitator</span>
                        <div class="group-session-header">
                            <div class="group-session-title">History Study Group</div>
                            <div class="group-session-status">You are facilitator</div>
                        </div>
                        <div class="subject-description" style="margin-bottom:0.5rem;">World War II deep dive and presentations.</div>
                        <div style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;"><i class="fas fa-calendar-alt"></i> Next: May 16, 5:00 PM</div>
                        <div class="group-session-actions">
                            <button class="quick-action-btn" title="Edit"><i class="fas fa-edit"></i> Edit</button>
                            <button class="quick-action-btn" title="Manage Members"><i class="fas fa-users"></i> Manage Members</button>
                        </div>
                    </div>
                </div>
                <div id="noMyGroups" style="display:none;text-align:center;padding:2rem;color:var(--text-light);">
                    <i class="fas fa-user-friends" style="font-size:2.5rem;margin-bottom:1rem;opacity:0.5;"></i>
                    <div>You are not a member of any groups yet.</div>
                </div>
            </div>

            <!-- Create Group (modern form) -->
            <div id="createGroup" class="group-content" style="display:none;padding:2rem;">
                <div class="subject-card" style="max-width:520px;margin:auto;box-shadow:0 4px 24px rgba(108,92,231,0.08);">
                    <div class="subject-header">
                        <div class="subject-title" style="font-size:1.2rem;font-weight:700;">Create New Study Group</div>
                    </div>
                    <form id="createGroupForm" autocomplete="off">
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon"><i class="fas fa-heading"></i></div>
                                <span>Group Name</span>
                            </div>
                            <input type="text" id="groupName" class="quick-action-btn" style="width:100%;" placeholder="Enter group name" required maxlength="40">
                        </div>
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon"><i class="fas fa-book"></i></div>
                                <span>Subject</span>
                            </div>
                            <select id="groupSubject" class="quick-action-btn" style="width:100%;" required>
                                <option value="">Select subject</option>
                                <option>Mathematics</option>
                                <option>Science</option>
                                <option>English</option>
                                <option>History</option>
                                <option>Foreign Language</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon"><i class="fas fa-info-circle"></i></div>
                                <span>Description</span>
                            </div>
                            <textarea id="groupDescription" class="quick-action-btn" style="width:100%;min-height:80px;" placeholder="Describe your group (max 200 chars)" maxlength="200"></textarea>
                        </div>
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon"><i class="fas fa-lock"></i></div>
                                <span>Privacy</span>
                            </div>
                            <div style="display:flex;gap:1rem;">
                                <label style="display:flex;align-items:center;gap:0.5rem;">
                                    <input type="radio" name="groupPrivacy" value="public" checked> Public
                                </label>
                                <label style="display:flex;align-items:center;gap:0.5rem;">
                                    <input type="radio" name="groupPrivacy" value="private"> Private
                                </label>
                            </div>
                        </div>
                        <div class="settings-option" style="margin-top:1rem;">
                            <div class="settings-option-label">
                                <div class="settings-option-icon"><i class="fas fa-calendar-alt"></i></div>
                                <span>First Session</span>
                            </div>
                            <input type="datetime-local" id="groupFirstSession" class="quick-action-btn" style="width:100%;">
                        </div>
                        <button type="submit" class="quick-action-btn primary" style="width:100%;margin-top:1.5rem;"><i class="fas fa-plus"></i> Create Group</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
/* Modern pulse animation for live indicator */
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(0,184,148,0.5);}
    70% { box-shadow: 0 0 0 10px rgba(0,184,148,0);}
    100% { box-shadow: 0 0 0 0 rgba(0,184,148,0);}
}
</style>

<!-- Toast Notification (Advanced & Modern) -->
<div class="toast-notification success" id="successToast" style="display: none; align-items: flex-start; min-width: 320px; max-width: 420px; box-shadow: 0 8px 32px rgba(44,62,80,0.18); border-left: 6px solid var(--success-color); position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%); z-index: 2000; padding: 1.1rem 1.5rem 1.1rem 1.25rem;">
    <div style="display:flex;align-items:center;gap:0.75rem;flex:1;">
        <span id="toastIcon" style="font-size:1.5rem;display:flex;align-items:center;">
            <i class="fas fa-check-circle"></i>
        </span>
        <div style="flex:1;">
            <div id="toastTitle" style="font-weight:600;font-size:1.08rem;margin-bottom:0.15rem;">Success</div>
            <span id="toastMessage" style="font-size:1rem;line-height:1.5;">Operation completed successfully!</span>
        </div>
    </div>
    <button id="toastCloseBtn" aria-label="Close notification" style="background:none;border:none;color:var(--text-light);font-size:1.2rem;cursor:pointer;margin-left:1rem;transition:color 0.2s;">
        <i class="fas fa-times"></i>
    </button>
    <div id="toastProgress" style="position:absolute;left:0;bottom:0;height:4px;width:100%;background:rgba(0,0,0,0.06);">
        <div id="toastProgressBar" style="height:100%;width:100%;background:var(--success-color);transition:width 0.2s;"></div>
    </div>
</div>
<script>
(function() {
    // Advanced toast logic
    let toastTimeout, toastInterval;
    const toast = document.getElementById('successToast');
    const toastCloseBtn = document.getElementById('toastCloseBtn');
    const toastProgressBar = document.getElementById('toastProgressBar');
    const toastIcon = document.getElementById('toastIcon');
    const toastTitle = document.getElementById('toastTitle');

    // Modern showToast function (overrides previous)
    window.showToast = function(message, type = 'success', title = null) {
        // Icon and color by type
        let icon = 'fa-check-circle', color = 'var(--success-color)', defaultTitle = 'Success';
        if (type === 'error') { icon = 'fa-times-circle'; color = 'var(--danger-color)'; defaultTitle = 'Error'; }
        else if (type === 'warning') { icon = 'fa-exclamation-triangle'; color = 'var(--warning-color)'; defaultTitle = 'Warning'; }
        else if (type === 'info') { icon = 'fa-info-circle'; color = 'var(--info-color)'; defaultTitle = 'Info'; }

        toast.className = `toast-notification ${type}`;
        toastIcon.innerHTML = `<i class="fas ${icon}" style="color:${color};"></i>`;
        toastTitle.textContent = title || defaultTitle;
        document.getElementById('toastMessage').textContent = message;

        // Progress bar
        toastProgressBar.style.background = color;
        toastProgressBar.style.width = '100%';

        // Border color
        toast.style.borderLeft = `6px solid ${color}`;

        toast.style.display = 'flex';
        let duration = 3200, elapsed = 0, interval = 30;
        clearTimeout(toastTimeout); clearInterval(toastInterval);

        toastTimeout = setTimeout(() => { toast.style.display = 'none'; }, duration);
        toastInterval = setInterval(() => {
            elapsed += interval;
            toastProgressBar.style.width = Math.max(0, 100 - (elapsed / duration) * 100) + '%';
            if (elapsed >= duration) clearInterval(toastInterval);
        }, interval);
    };

    // Close button
    toastCloseBtn.addEventListener('click', () => {
        toast.style.display = 'none';
        clearTimeout(toastTimeout); clearInterval(toastInterval);
    });

    // Pause on hover
    toast.addEventListener('mouseenter', () => { clearTimeout(toastTimeout); clearInterval(toastInterval); });
    toast.addEventListener('mouseleave', () => {
        toastTimeout = setTimeout(() => { toast.style.display = 'none'; }, 1200);
        let width = parseFloat(toastProgressBar.style.width) || 100;
        let duration = 1200 * (width / 100);
        let elapsed = 0, interval = 30;
        toastInterval = setInterval(() => {
            elapsed += interval;
            toastProgressBar.style.width = Math.max(0, width - (elapsed / duration) * width) + '%';
            if (elapsed >= duration) clearInterval(toastInterval);
        }, interval);
    });
})();
</script>

  <!-- JavaScript -->
  <script>
      document.addEventListener('DOMContentLoaded', function() {
          // Toggle sidebar on mobile
          const sidebarToggle = document.getElementById('sidebarToggle');
          const aiSidebar = document.getElementById('aiSidebar');
          
          sidebarToggle.addEventListener('click', function() {
              aiSidebar.classList.toggle('active');
          });
          
          // Toggle dark mode
          const themeToggle = document.getElementById('themeToggle');
          themeToggle.addEventListener('click', function() {
              document.body.classList.toggle('dark-mode');
              const icon = themeToggle.querySelector('i');
              if (document.body.classList.contains('dark-mode')) {
                  icon.classList.remove('fa-moon');
                  icon.classList.add('fa-sun');
              } else {
                  icon.classList.remove('fa-sun');
                  icon.classList.add('fa-moon');
              }
          });
          
          // Settings modal
          const settingsModal = document.getElementById('settingsModal');
          const sidebarSettingsBtn = document.getElementById('sidebarSettingsBtn');
          const modalClose = document.getElementById('modalClose');
          
          sidebarSettingsBtn.addEventListener('click', function() {
              settingsModal.classList.add('active');
          });
          
          modalClose.addEventListener('click', function() {
              settingsModal.classList.remove('active');
          });
          
          // Tab switching in settings
          const tabs = document.querySelectorAll('.tab');
          tabs.forEach(tab => {
              tab.addEventListener('click', function() {
                  // Remove active class from all tabs and content
                  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                  document.querySelectorAll('.tab-content').forEach(c => c.style.display = 'none');
                  
                  // Add active class to clicked tab
                  this.classList.add('active');
                  
                  // Show corresponding content
                  const tabId = this.getAttribute('data-tab') + 'Tab';
                  document.getElementById(tabId).style.display = 'block';
              });
          });
          
          // Curriculum modal
          const curriculumModal = document.getElementById('curriculumModal');
          const curriculumBtn = document.getElementById('curriculumBtn');
          const curriculumModalClose = document.getElementById('curriculumModalClose');
          
          curriculumBtn.addEventListener('click', function() {
              curriculumModal.classList.add('active');
          });
          
          curriculumModalClose.addEventListener('click', function() {
              curriculumModal.classList.remove('active');
          });
          
          // Subject tab switching
          const subjectTabs = document.querySelectorAll('#curriculumModal .tab');
          subjectTabs.forEach(tab => {
              tab.addEventListener('click', function() {
                  // Remove active class from all tabs and content
                  document.querySelectorAll('#curriculumModal .tab').forEach(t => t.classList.remove('active'));
                  document.querySelectorAll('#curriculumModal .subject-content').forEach(c => c.style.display = 'none');
                  
                  // Add active class to clicked tab
                  this.classList.add('active');
                  
                  // Show corresponding content
                  const subjectId = this.getAttribute('data-subject') + 'Curriculum';
                  document.getElementById(subjectId).style.display = 'block';
              });
          });
          
          // Live Classes modal
          const liveClassModal = document.getElementById('liveClassModal');
          const liveClassBtn = document.getElementById('liveClassBtn');
          const liveClassModalClose = document.getElementById('liveClassModalClose');
          
          liveClassBtn.addEventListener('click', function() {
              liveClassModal.classList.add('active');
          });
          
          liveClassModalClose.addEventListener('click', function() {
              liveClassModal.classList.remove('active');
          });
          
          // Live Class tab switching
          const classTabs = document.querySelectorAll('#liveClassModal .tab');
          classTabs.forEach(tab => {
              tab.addEventListener('click', function() {
                  // Remove active class from all tabs and content
                  document.querySelectorAll('#liveClassModal .tab').forEach(t => t.classList.remove('active'));
                  document.querySelectorAll('#liveClassModal .class-content').forEach(c => c.style.display = 'none');
                  
                  // Add active class to clicked tab
                  this.classList.add('active');
                  
                  // Show corresponding content
                  const classType = this.getAttribute('data-class-type');
                  document.getElementById(classType + 'Classes').style.display = 'block';
              });
          });
          
          // Group Sessions modal
          const groupSessionModal = document.getElementById('groupSessionModal');
          const groupSessionBtn = document.getElementById('groupSessionBtn');
          const groupSessionModalClose = document.getElementById('groupSessionModalClose');
          
          groupSessionBtn.addEventListener('click', function() {
              groupSessionModal.classList.add('active');
          });
          
          groupSessionModalClose.addEventListener('click', function() {
              groupSessionModal.classList.remove('active');
          });
          
          // Group Session tab switching
          const groupTabs = document.querySelectorAll('#groupSessionModal .tab');
          groupTabs.forEach(tab => {
              tab.addEventListener('click', function() {
                  // Remove active class from all tabs and content
                  document.querySelectorAll('#groupSessionModal .tab').forEach(t => t.classList.remove('active'));
                  document.querySelectorAll('#groupSessionModal .group-content').forEach(c => c.style.display = 'none');
                  
                  // Add active class to clicked tab
                  this.classList.add('active');
                  
                  // Show corresponding content
                  const groupType = this.getAttribute('data-group-type');
                  document.getElementById(groupType + 'Groups').style.display = 'block';
              });
          });
          
          // Notifications modal
          const notificationsModal = document.getElementById('notificationsModal');
          const notificationsBtn = document.getElementById('notificationsBtn');
          const notificationsModalClose = document.getElementById('notificationsModalClose');
          
          notificationsBtn.addEventListener('click', function() {
              notificationsModal.classList.add('active');
          });
          
          notificationsModalClose.addEventListener('click', function() {
              notificationsModal.classList.remove('active');
          });
          
          // Learning Goals modal
          const goalsModal = document.getElementById('goalsModal');
          const editGoalsBtn = document.getElementById('editGoalsBtn');
          const goalsModalClose = document.getElementById('goalsModalClose');
          
          editGoalsBtn.addEventListener('click', function() {
              goalsModal.classList.add('active');
          });
          
          goalsModalClose.addEventListener('click', function() {
              goalsModal.classList.remove('active');
          });
          
          // Add new goal
          const addGoalBtn = document.getElementById('addGoalBtn');
          const goalsList = document.getElementById('goalsList');
          
          addGoalBtn.addEventListener('click', function() {
              const goalItem = document.createElement('div');
              goalItem.className = 'goal-item';
              goalItem.innerHTML = `
                  <input type="text" class="quick-action-btn" style="width: calc(100% - 40px);" placeholder="Enter new goal">
                  <button class="quick-action-btn delete-goal"><i class="fas fa-trash"></i></button>
              `;
              goalsList.appendChild(goalItem);
              
              // Add event listener to new delete button
              goalItem.querySelector('.delete-goal').addEventListener('click', function() {
                  goalItem.remove();
              });
          });
          
          // Password modal
          const passwordModal = document.getElementById('passwordModal');
          const changePasswordBtn = document.getElementById('changePasswordBtn');
          const passwordModalClose = document.getElementById('passwordModalClose');
          
          changePasswordBtn.addEventListener('click', function() {
              passwordModal.classList.add('active');
          });
          
          passwordModalClose.addEventListener('click', function() {
              passwordModal.classList.remove('active');
          });
          
          // Delete Account modal
          const deleteAccountModal = document.getElementById('deleteAccountModal');
          const deleteAccountBtn = document.getElementById('deleteAccountBtn');
          const deleteAccountModalClose = document.getElementById('deleteAccountModalClose');
          const cancelDeleteAccountBtn = document.getElementById('cancelDeleteAccountBtn');
          
          deleteAccountBtn.addEventListener('click', function() {
              deleteAccountModal.classList.add('active');
          });
          
          deleteAccountModalClose.addEventListener('click', function() {
              deleteAccountModal.classList.remove('active');
          });
          
          cancelDeleteAccountBtn.addEventListener('click', function() {
              deleteAccountModal.classList.remove('active');
          });
          
          // Model selector
          const modelOptions = document.querySelectorAll('.model-option');
          const currentModel = document.getElementById('currentModel');
          
          modelOptions.forEach(option => {
              option.addEventListener('click', function() {
                  // Remove active class from all options
                  modelOptions.forEach(opt => opt.classList.remove('active'));
                  
                  // Add active class to clicked option
                  this.classList.add('active');
                  
                  // Update current model display
                  const modelName = this.querySelector('.model-name').textContent;
                  currentModel.textContent = modelName;
                  
                  // Show toast notification
                  showToast(`Switched to ${modelName} mode`);
              });
          });
          
          // File upload preview
          const fileUploadBtn = document.getElementById('fileUploadBtn');
          const fileInput = document.getElementById('fileInput');
          const filePreviewContainer = document.getElementById('filePreviewContainer');
          
          fileUploadBtn.addEventListener('click', function() {
              fileInput.click();
          });
          
          fileInput.addEventListener('change', function() {
              filePreviewContainer.innerHTML = '';
              filePreviewContainer.style.display = 'none';
              
              if (this.files.length > 0) {
                  filePreviewContainer.style.display = 'block';
                  
                  for (let i = 0; i < this.files.length; i++) {
                      const file = this.files[i];
                      const filePreview = document.createElement('div');
                      filePreview.className = 'file-preview';
                      
                      // Determine file type icon
                      let fileIcon = 'fa-file';
                      if (file.type.includes('image')) fileIcon = 'fa-file-image';
                      else if (file.type.includes('pdf')) fileIcon = 'fa-file-pdf';
                      else if (file.type.includes('word')) fileIcon = 'fa-file-word';
                      else if (file.type.includes('excel')) fileIcon = 'fa-file-excel';
                      else if (file.type.includes('powerpoint')) fileIcon = 'fa-file-powerpoint';
                      else if (file.type.includes('zip')) fileIcon = 'fa-file-archive';
                      
                      filePreview.innerHTML = `
                          <div class="file-icon">
                              <i class="fas ${fileIcon}"></i>
                          </div>
                          <div class="file-info">
                              <div class="file-name">${file.name}</div>
                              <div class="file-size">${formatFileSize(file.size)}</div>
                          </div>
                          <div class="file-remove" data-index="${i}">
                              <i class="fas fa-times"></i>
                          </div>
                      `;
                      
                      filePreviewContainer.appendChild(filePreview);
                  }
                  
                  // Add event listeners to remove buttons
                  document.querySelectorAll('.file-remove').forEach(btn => {
                      btn.addEventListener('click', function() {
                          const index = parseInt(this.getAttribute('data-index'));
                          removeFileFromInput(index);
                          this.parentElement.remove();
                          
                          if (filePreviewContainer.children.length === 0) {
                              filePreviewContainer.style.display = 'none';
                          }
                      });
                  });
              }
          });
          
          function removeFileFromInput(index) {
              const dt = new DataTransfer();
              const files = fileInput.files;
              
              for (let i = 0; i < files.length; i++) {
                  if (i !== index) {
                      dt.items.add(files[i]);
                  }
              }
              
              fileInput.files = dt.files;
          }
          
          function formatFileSize(bytes) {
              if (bytes === 0) return '0 Bytes';
              
              const k = 1024;
              const sizes = ['Bytes', 'KB', 'MB', 'GB'];
              const i = Math.floor(Math.log(bytes) / Math.log(k));
              
              return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
          }
          
          // Textarea auto-resize
          const aiTextarea = document.getElementById('aiTextarea');
          const aiSendBtn = document.getElementById('aiSendBtn');
          
          aiTextarea.addEventListener('input', function() {
              this.style.height = 'auto';
              this.style.height = (this.scrollHeight) + 'px';
              
              // Enable/disable send button based on content
              aiSendBtn.disabled = this.value.trim() === '';
          });
          
          // Send message
          aiSendBtn.addEventListener('click', sendMessage);
          aiTextarea.addEventListener('keydown', function(e) {
              if (e.key === 'Enter' && !e.shiftKey) {
                  e.preventDefault();
                  sendMessage();
              }
          });
          
          function sendMessage() {
              const message = aiTextarea.value.trim();
              if (message === '') return;
              
              // Add user message to chat
              addMessage('user', message);
              
              // Clear input
              aiTextarea.value = '';
              aiTextarea.style.height = 'auto';
              aiSendBtn.disabled = true;
              
              // Show typing indicator
              const typingIndicator = document.createElement('div');
              typingIndicator.className = 'typing-indicator';
              typingIndicator.id = 'typingIndicator';
              typingIndicator.innerHTML = `
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
              `;
              document.getElementById('aiMain').appendChild(typingIndicator);
              document.getElementById('aiMain').scrollTop = document.getElementById('aiMain').scrollHeight;
              
              // Simulate AI response after delay
              setTimeout(() => {
                  // Remove typing indicator
                  const typingIndicator = document.getElementById('typingIndicator');
                  if (typingIndicator) typingIndicator.remove();
                  
                  // Add AI response
                  addMessage('teacher', getAIResponse(message));
                  
                  // Scroll to bottom
                  document.getElementById('aiMain').scrollTop = document.getElementById('aiMain').scrollHeight;
              }, 1500);
          }
          
          function addMessage(sender, text) {
              const aiMain = document.getElementById('aiMain');
              const messageDiv = document.createElement('div');
              messageDiv.className = `message message-${sender}`;
              
              const avatar = sender === 'user' ? 'JD' : 'AI';
              const avatarBg = sender === 'user' ? 'var(--primary-color)' : 'var(--secondary-color)';
              
              messageDiv.innerHTML = `
                  <div class="message-avatar" style="background-color: ${avatarBg}">${avatar}</div>
                  <div class="message-content">
                      <div class="message-text">${formatMessageText(text)}</div>
                      <div class="message-time">${formatTime(new Date())}</div>
                      <div class="message-actions">
                          ${sender === 'teacher' ? `
                          <button class="message-action like" title="Like"><i class="fas fa-thumbs-up"></i></button>
                          <button class="message-action dislike" title="Dislike"><i class="fas fa-thumbs-down"></i></button>
                          <button class="message-action copy" title="Copy"><i class="fas fa-copy"></i></button>
                          <button class="message-action read" title="Read aloud"><i class="fas fa-volume-up"></i></button>
                          ` : ''}
                      </div>
                  </div>
              `;
              
              aiMain.appendChild(messageDiv);
              
              // Add event listeners to action buttons
              if (sender === 'teacher') {
                  messageDiv.querySelector('.like').addEventListener('click', function() {
                      showToast('Feedback submitted: Like');
                  });
                  
                  messageDiv.querySelector('.dislike').addEventListener('click', function() {
                      showToast('Feedback submitted: Dislike');
                  });
                  
                  messageDiv.querySelector('.copy').addEventListener('click', function() {
                      navigator.clipboard.writeText(text);
                      showToast('Message copied to clipboard');
                  });
                  
                  messageDiv.querySelector('.read').addEventListener('click', function() {
                      if ('speechSynthesis' in window) {
                          const utterance = new SpeechSynthesisUtterance(text);
                          window.speechSynthesis.speak(utterance);
                          showToast('Reading message aloud');
                      } else {
                          showToast('Text-to-speech not supported in your browser', 'error');
                      }
                  });
              }
          }
          
          function formatMessageText(text) {
              // Simple formatting - in a real app you'd use a proper markdown parser
              return text
                  .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                  .replace(/\*(.*?)\*/g, '<em>$1</em>') // Italic
                  .replace(/\n/g, '<br>'); // Line breaks
          }
          
          function formatTime(date) {
              return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
          }
          
          function getAIResponse(message) {
              // In a real app, this would call an API
              // For demo purposes, we'll return some canned responses
              const responses = [
                  "I'd be happy to help with that! Could you provide more details about what you're looking for?",
                  "That's an interesting question. Let me explain how that works...",
                  "I understand you're asking about this concept. Here's a detailed explanation...",
                  "Great question! The answer involves several key points...",
                  "I can definitely help with that. First, let's break it down into smaller parts...",
                  "Based on your question, I think you're referring to this topic. Here's what you need to know..."
              ];
              
              return responses[Math.floor(Math.random() * responses.length)];
          }
          
          function showToast(message, type = 'success') {
              const toast = document.getElementById('successToast');
              toast.querySelector('#toastMessage').textContent = message;
              toast.className = `toast-notification ${type}`;
              toast.style.display = 'flex';
              
              setTimeout(() => {
                  toast.style.display = 'none';
              }, 3000);
          }
          
          // Initialize with some sample chat history
          const chatHistory = document.getElementById('chatHistory');
          const sampleChats = [
              { title: "Algebra Help", preview: "Can you explain quadratic equations?", time: "10:30 AM" },
              { title: "History Essay", preview: "Need help with thesis statement", time: "Yesterday" },
              { title: "Science Project", preview: "Ideas for physics experiment", time: "May 5" },
              { title: "College Prep", preview: "What should I focus on for SAT?", time: "Apr 28" },
              { title: "Spanish Homework", preview: "Verb conjugation practice", time: "Apr 20" }
          ];
          
          sampleChats.forEach(chat => {
              const chatItem = document.createElement('div');
              chatItem.className = 'chat-item';
              chatItem.innerHTML = `
                  <div class="chat-item-icon">
                      <i class="fas fa-comment"></i>
                  </div>
                  <div class="chat-item-content">
                      <div class="chat-item-title">${chat.title}</div>
                      <div class="chat-item-preview">${chat.preview}</div>
                  </div>
                  <div class="chat-item-time">${chat.time}</div>
              `;
              chatHistory.appendChild(chatItem);
              
              chatItem.addEventListener('click', function() {
                  // In a real app, this would load the chat history
                  document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
                  this.classList.add('active');
                  
                  // Clear main chat and add sample messages
                  const aiMain = document.getElementById('aiMain');
                  aiMain.innerHTML = '';
                  
                  addMessage('user', chat.preview);
                  addMessage('teacher', getAIResponse(chat.preview));
                  
                  // Scroll to bottom
                  aiMain.scrollTop = aiMain.scrollHeight;
              });
          });
          
          // New chat button
          const newChatBtn = document.getElementById('newChatBtn');
          newChatBtn.addEventListener('click', function() {
              // Clear main chat
              document.getElementById('aiMain').innerHTML = '';
              
              // Remove active class from all chat items
              document.querySelectorAll('.chat-item').forEach(item => item.classList.remove('active'));
              
              // Add new chat to history
              const chatItem = document.createElement('div');
              chatItem.className = 'chat-item active';
              chatItem.innerHTML = `
                  <div class="chat-item-icon">
                      <i class="fas fa-comment"></i>
                  </div>
                  <div class="chat-item-content">
                      <div class="chat-item-title">New Chat</div>
                      <div class="chat-item-preview">Start a new conversation</div>
                  </div>
                  <div class="chat-item-time">Just now</div>
              `;
              chatHistory.insertBefore(chatItem, chatHistory.firstChild);
              
              // Show toast
              showToast('New chat started');
          });
          
          // Initialize language dropdown
          const languages = [
              { code: 'en', name: 'English', flag: 'us' },
              { code: 'es', name: 'Spanish', flag: 'es' },
              { code: 'fr', name: 'French', flag: 'fr' },
              { code: 'de', name: 'German', flag: 'de' },
              { code: 'zh', name: 'Chinese', flag: 'cn' },
              { code: 'ja', name: 'Japanese', flag: 'jp' },
              { code: 'ko', name: 'Korean', flag: 'kr' },
              { code: 'ru', name: 'Russian', flag: 'ru' }
          ];
          
          const languageDropdown = document.getElementById('languageDropdown');
          languages.forEach(lang => {
              const option = document.createElement('div');
              option.className = 'language-option';
              option.innerHTML = `
                  <img src="https://flagcdn.com/w20/${lang.flag}.png" class="language-flag">
                  <span>${lang.name}</span>
              `;
              
              option.addEventListener('click', function() {
                  document.getElementById('currentLanguage').textContent = lang.code.toUpperCase();
                  document.getElementById('currentLanguageFlag').src = `https://flagcdn.com/w20/${lang.flag}.png`;
                  showToast(`Language set to ${lang.name}`);
              });
              
              languageDropdown.appendChild(option);
          });
          
          // Quiz functionality
          const checkAnswerBtn = document.getElementById('checkAnswerBtn');
          const quizFeedback = document.getElementById('quizFeedback');
          const quizOptions = document.querySelectorAll('.quiz-option');
          
          if (checkAnswerBtn) {
              checkAnswerBtn.addEventListener('click', function() {
                  quizOptions.forEach(option => {
                      option.classList.remove('selected', 'correct', 'incorrect');
                  });
                  
                  // In a real app, this would check the actual answer
                  // For demo, we'll just mark the first option as correct
                  quizOptions[0].classList.add('selected', 'correct');
                  quizFeedback.classList.add('show');
              });
          }
          
          quizOptions.forEach(option => {
              option.addEventListener('click', function() {
                  if (!quizFeedback.classList.contains('show')) {
                      quizOptions.forEach(opt => opt.classList.remove('selected'));
                      this.classList.add('selected');
                  }
              });
          });
          
          // Science quiz functionality
          const checkScienceAnswerBtn = document.getElementById('checkScienceAnswerBtn');
          const scienceQuizFeedback = document.getElementById('scienceQuizFeedback');
          const scienceQuizOptions = document.querySelectorAll('#scienceCurriculum .quiz-option');
          
          if (checkScienceAnswerBtn) {
              checkScienceAnswerBtn.addEventListener('click', function() {
                  scienceQuizOptions.forEach(option => {
                      option.classList.remove('selected', 'correct', 'incorrect');
                  });
                  
                  // Mark the correct answer (second option for science quiz)
                  scienceQuizOptions[1].classList.add('selected', 'correct');
                  scienceQuizFeedback.classList.add('show');
              });
          }
          
          scienceQuizOptions.forEach(option => {
              option.addEventListener('click', function() {
                  if (!scienceQuizFeedback.classList.contains('show')) {
                      scienceQuizOptions.forEach(opt => opt.classList.remove('selected'));
                      this.classList.add('selected');
                  }
              });
          });
          
          // Password strength indicator
          const newPassword = document.getElementById('newPassword');
          const passwordStrengthBar = document.getElementById('passwordStrengthBar');
          const passwordStrengthText = document.getElementById('passwordStrengthText');
          
          if (newPassword) {
              newPassword.addEventListener('input', function() {
                  const strength = calculatePasswordStrength(this.value);
                  passwordStrengthBar.style.width = strength.percentage + '%';
                  passwordStrengthText.textContent = strength.text;
                  
                  if (strength.percentage < 40) {
                      passwordStrengthBar.style.backgroundColor = 'var(--danger-color)';
                  } else if (strength.percentage < 70) {
                      passwordStrengthBar.style.backgroundColor = 'var(--warning-color)';
                  } else {
                      passwordStrengthBar.style.backgroundColor = 'var(--success-color)';
                  }
              });
          }
          
          function calculatePasswordStrength(password) {
              let strength = 0;
              
              // Length
              if (password.length > 0) strength += 10;
              if (password.length >= 8) strength += 20;
              if (password.length >= 12) strength += 10;
              
              // Complexity
              if (/[A-Z]/.test(password)) strength += 10;
              if (/[a-z]/.test(password)) strength += 10;
              if (/[0-9]/.test(password)) strength += 10;
              if (/[^A-Za-z0-9]/.test(password)) strength += 10;
              
              // Common patterns
              if (!/(.)\1{2,}/.test(password)) strength += 10; // No repeated characters
              if (!password.match(/^[0-9]+$/)) strength += 10; // Not all numbers
              
              // Cap at 100
              strength = Math.min(strength, 100);
              
              // Determine text
              let text = 'Weak';
              if (strength >= 70) text = 'Strong';
              else if (strength >= 40) text = 'Medium';
              
              return {
                  percentage: strength,
                  text: text
              };
          }
          
          // Change avatar
          const changeAvatarBtn = document.getElementById('changeAvatarBtn');
          const avatarUpload = document.getElementById('avatarUpload');
          const userAvatar = document.getElementById('userAvatar');
          
          if (changeAvatarBtn) {
              changeAvatarBtn.addEventListener('click', function() {
                  avatarUpload.click();
              });
          }
          
          if (avatarUpload) {
              avatarUpload.addEventListener('change', function() {
                  if (this.files && this.files[0]) {
                      const reader = new FileReader();
                      
                      reader.onload = function(e) {
                          userAvatar.style.backgroundImage = `url(${e.target.result})`;
                          userAvatar.textContent = '';
                          showToast('Avatar updated successfully');
                      }
                      
                      reader.readAsDataURL(this.files[0]);
                  }
              });
          }
          
          // Close modals when clicking outside
          document.querySelectorAll('.modal-overlay').forEach(modal => {
              modal.addEventListener('click', function(e) {
                  if (e.target === this) {
                      this.classList.remove('active');
                  }
              });
          });
          
          // Initialize with a welcome message
          setTimeout(() => {
              addMessage('teacher', "Hello! I'm RabbaAI, your personal learning assistant. How can I help you today?");
              document.getElementById('aiMain').scrollTop = document.getElementById('aiMain').scrollHeight;
          }, 500);
      });
  </script>
</body>
</html>